import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as f}from"./iframe-xgmRPZmB.js";import{c as D}from"./periods-BueKGNxC.js";import{g as X,a as M,Y,X as E,b as H,c as k}from"./YGuideLine-B_9FjA07.js";import{R as x}from"./rankingColors-YVpIGQhO.js";import{e as F,f as U,g as w}from"./index-CJnluzhN.js";const O=({series:e})=>Array.isArray(e.data.mainY[0]),q={XAXIS_STROKE_WIDTH:1.5,XAXIS_Y_OFFSET:28,DEFAULT_BAR_COLOR:"#212121",ACTIVATE_BAR_COLOR:"var(--color-brand-500)",BAR_RADIUS:4,ANIMATION_DURATION_MS:500},R={TOP_RANK:3,RANK_COLOR:[x[0],x[1],x[2],x[4]]},G=({stackBarData:e,barTopY:t,barHeight:a,totalAmount:r})=>[...e].sort((o,u)=>Number(u.amount)-Number(o.amount)).reduce((o,u,s)=>{const m=Number(u.amount)||0;if(s>R.TOP_RANK)return o;const g=t+o.percentage/100*a,c=r>0?s<R.TOP_RANK?Math.round(m/r*100*10)/10:100-o.percentage:0,A=c/100*a;return{percentage:o.percentage+c,barSegmentInfoList:[...o.barSegmentInfoList,{y:g,barHeight:A,percentage:Math.round(c*10)/10,label:s>=R.TOP_RANK?"기타":u.label,color:u.color??R.RANK_COLOR[s]}]}},{percentage:0,barSegmentInfoList:[]}).barSegmentInfoList,K=({tooltipContent:e,label:t,percentage:a,totalAmount:r})=>e?e(t,`${Math.round(a/100*r)}건`,"(",`${a}%`,")"):null,P=({stackBarData:e})=>e.reduce((t,a)=>t+(Number(a.amount)||0),0),W=({y:e,hasXAxis:t,viewBoxHeight:a})=>{const{XAXIS_Y_OFFSET:r,XAXIS_STROKE_WIDTH:i}=q;return t?a-r-e-i/2:a-e},Q=({viewBoxWidth:e,xDataLength:t})=>e/t*.5,Z=({isStackBar:e,index:t,series:a})=>{if(e){const r=a.data.mainY[t],i=r.reduce((u,s)=>typeof s.amount=="number"?u+s.amount:u,0),o=r[0]?.unit||"";return`${i} ${o}`}else{const r=a.data.mainY[t];return`${r.amount} ${r.unit}`}},z=()=>{const e=f.useId(),t=f.useId();return{titleId:e,descId:t}},J=({viewBoxWidth:e,viewBoxHeight:t,barChartSeries:a,hasXAxis:r=!1})=>{const[i,o]=f.useState(t),u=f.useRef(null),s=f.useRef(null),m=O({series:a}),g=f.useMemo(()=>a.data.mainX.map(d=>d.amount??""),[a.data.mainX]),c=f.useMemo(()=>a.data.mainX.length===0?[]:X({svgWidth:e,xDataLength:a.data.mainX.length}),[e,a.data.mainX.length]),A=f.useMemo(()=>{const d=m?a.data.mainY.map(l=>l.reduce((y,b)=>y+(Number(b.amount)||0),0)):a.data.mainY.map(l=>l.amount),p=d.length>0?Math.max(...d.filter(l=>l!==null).map(Number)):10;return Math.ceil(Math.ceil(p*1.5)/10)*10},[a.data.mainY,m]),T=f.useMemo(()=>{if(a.data.mainX.length===0)return[];const d=m?{...a,data:{...a.data,mainY:a.data.mainY.map(p=>({amount:p.reduce((h,l)=>h+(Number(l.amount)||0),0),unit:p[0]?.unit||""}))}}:a;return M({svgWidth:e,adjustedHeight:i,xDataLength:d.data.mainX.length,yData:d.data.mainY,maximumY:A})},[e,i,a,A,m]);return f.useLayoutEffect(()=>{(()=>{if(!r||!s.current){o(t);return}const p=s.current.getBBox();o(p.y+p.height/2)})()},[r,t]),{svgWidth:e,adjustedHeight:i,xLabelList:g,xCoordinate:c,primaryCoordinate:T,svgRef:u,xAxisRef:s}},ee=({barMiddleX:e,barTopY:t,width:a,height:r,radius:i})=>{const o=t+r,u=e-a/2,s=e+a/2;return{pathD:i?`
      M ${e} ${t}
      H ${u+i}
      Q ${u} ${t} ${u} ${t+i}
      V ${o}
      H ${s}
      V ${t+i}
      Q ${s} ${t} ${s-i} ${t}
      Z
    `:`
      M ${e} ${t}
      H ${u}
      V ${o}
      H ${s}
      V ${t}
      Z
    `}},L=({barRef:e,hasAnimation:t})=>{f.useLayoutEffect(()=>{if(!e||!e.current||!t)return;e.current.style.transform="scaleY(0)";const a=requestAnimationFrame(()=>{e.current&&(e.current.style.transition=`transform ${q.ANIMATION_DURATION_MS}ms ease-out`,e.current.style.transform="scaleY(1)")});return()=>cancelAnimationFrame(a)},[e,t])},te=({pathRef:e,hasAnimation:t})=>{f.useEffect(()=>{!e.current||!t||(e.current.style.transition=`d ${q.ANIMATION_DURATION_MS}ms ease-in-out`)},[e,t])},C=({barMiddleX:e,barTopY:t,width:a,height:r,radius:i,hasInitAnimation:o=!0,hasMoveAnimation:u=!0,hasGradient:s=!0,activeTooltip:m=!1,tooltipContentText:g,bgColor:c=q.DEFAULT_BAR_COLOR,isActive:A=!1,barColorChangeOnHover:T=!0,className:d})=>{const p=f.useRef(null),h=f.useRef(null),l=Math.min(i??0,a/2,r),{pathD:y}=ee({barMiddleX:e,barTopY:t,width:a,height:r,radius:l});L({barRef:h,hasAnimation:o}),te({pathRef:p,hasAnimation:u});const b=n.jsx("path",{ref:p,d:y,fill:A?q.ACTIVATE_BAR_COLOR:c,className:D(T&&"hover:fill-brand-main"),style:{maskImage:s?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":"",WebkitMaskImage:s?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":""}});return n.jsx(n.Fragment,{children:n.jsx("g",{ref:h,style:{transformOrigin:`${e}px ${t+r}px`},className:d,children:m?n.jsxs(F,{children:[n.jsx(U,{asChild:!0,children:b}),n.jsx(w,{side:"left",className:"bg-grey-800 transition-duration-200 px-250! text-gray-50 [&_svg]:invisible",children:g})]}):b})})};C.__docgenInfo={description:"",methods:[],displayName:"Bar",props:{barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:""},hasInitAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasMoveAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContentText:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},isActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},bgColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};const B=({x:e,y:t,label:a,textColor:r="#A2A4A7",offsetY:i=8,fontSize:o=12,textAnchor:u="middle",fontWeight:s=500})=>n.jsx("text",{x:0,y:0,fill:r,textAnchor:u,fontSize:o,fontWeight:s,style:{transform:`translate(${e}px, ${t-i}px)`,transition:`transform ${q.ANIMATION_DURATION_MS}ms ease-in-out`},children:a});B.__docgenInfo={description:"",methods:[],displayName:"BarLabel",props:{x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},label:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},offsetY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},textColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'#A2A4A7'",computed:!1}},fontSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"12",computed:!1}},textAnchor:{required:!1,tsType:{name:"union",raw:"'start' | 'middle' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'middle'"},{name:"literal",value:"'end'"}]},description:"",defaultValue:{value:"'middle'",computed:!1}},fontWeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}}}};const $=({stackBarData:e,barMiddleX:t,barTopY:a,width:r,height:i,radius:o=Math.min(i,r,4),hasAnimation:u=!0,activeTooltip:s=!0,tooltipContent:m})=>{const g=f.useRef(null);L({barRef:g,hasAnimation:u});const c=P({stackBarData:e}),A=G({stackBarData:e,barTopY:a,barHeight:i,totalAmount:c});return n.jsx(n.Fragment,{children:n.jsx("g",{ref:g,style:{transformOrigin:`${t}px ${a+i}px`},children:A.map((T,d)=>n.jsx(C,{barMiddleX:t,barTopY:T.y,width:r,height:T.barHeight,bgColor:T.color??"#eee",radius:d===0?o:0,hasInitAnimation:!1,hasMoveAnimation:!0,hasGradient:!1,activeTooltip:s,barColorChangeOnHover:!1,tooltipContentText:K({tooltipContent:m,label:T.label,percentage:T.percentage,totalAmount:c})||""},`${T.label}-${d}`))})})};$.__docgenInfo={description:"",methods:[],displayName:"StackBar",props:{stackBarData:{required:!0,tsType:{name:"Array",elements:[{name:"StackBarSegment"}],raw:"StackBarSegment[]"},description:""},barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"Math.min(height, width, 4)",computed:!0}},hasAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""}}};const j=({coordinate:e,color:t=q.DEFAULT_BAR_COLOR,hasGradient:a=!1,series:r,hasBarLabel:i=!1,hasXAxis:o=!1,viewBoxHeight:u,viewBoxWidth:s,xCoordinate:m,tooltipContent:g,activeTooltip:c,activeDataIndex:A,barColorChangeOnHover:T})=>{const{BAR_RADIUS:d}=q,p=O({series:r});return n.jsx(n.Fragment,{children:e.map(({x:h,y:l},y)=>{if(h!==null&&l!==null){const b=W({y:l,hasXAxis:o,viewBoxHeight:u}),_=Q({viewBoxWidth:s,xDataLength:m.length}),I=g?g(r.data.mainY[y].amount?.toString()??"",r.data.mainY[y].unit?.toString()??""):null;return n.jsxs("g",{children:[i&&n.jsx(B,{x:h,y:l,label:Z({isStackBar:p,index:y,series:r}),textColor:q.DEFAULT_BAR_COLOR}),p?n.jsx($,{stackBarData:r.data.mainY[y],barMiddleX:h,barTopY:l,height:b,width:_,radius:d,activeTooltip:c,tooltipContent:g}):n.jsx(C,{barMiddleX:h,barTopY:l,height:b,width:_,radius:d,hasGradient:a,bgColor:t,activeTooltip:c,tooltipContentText:I,isActive:A===y,barColorChangeOnHover:T})]},r.data.mainX[y].amount)}})})};j.__docgenInfo={description:"",methods:[],displayName:"BarSeries",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""},series:{required:!0,tsType:{name:"AllBarChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},hasBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},viewBoxHeight:{required:!0,tsType:{name:"number"},description:""},viewBoxWidth:{required:!0,tsType:{name:"number"},description:""},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""},xCoordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},activeDataIndex:{required:!1,tsType:{name:"number"},description:""},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:""}}};const ae=({viewBoxWidth:e,viewBoxHeight:t,hasXAxis:a=!1,hasBarGradient:r=!1,showXGuideLine:i=!1,showYGuideLine:o=!1,barChartSeries:u,yGuideLineCount:s,activeTooltip:m=!1,tooltipContent:g=(...l)=>l.join(" "),chartTitle:c,chartDescription:A,hasBarLabel:T=!0,xAxisType:d,activeDataIndex:p,barColorChangeOnHover:h=!0})=>{const{titleId:l,descId:y}=z(),{svgWidth:b,adjustedHeight:_,xLabelList:I,xCoordinate:v,primaryCoordinate:N,svgRef:V,xAxisRef:S}=J({viewBoxWidth:e,viewBoxHeight:t,barChartSeries:u,hasXAxis:a});return n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e} ${t}`,ref:V,width:e,height:t,role:"graphics-document","aria-labelledby":l,"aria-describedby":y,children:[n.jsxs("g",{children:[n.jsx("title",{id:l,children:c}),n.jsx("desc",{id:y,children:A})]}),o&&n.jsx(Y,{svgWidth:b,adjustedHeight:_,yGuideLineCount:s}),i&&n.jsx(E,{xCoordinate:v,adjustedHeight:_}),a&&n.jsxs(n.Fragment,{children:[n.jsx(H,{viewBoxWidth:e,viewBoxHeight:t,axisType:d,ref:S}),n.jsx(k,{xLabelList:I,xCoordinate:v,viewBoxHeight:t})]}),n.jsx(j,{coordinate:N,hasGradient:r,series:u,activeTooltip:m,viewBoxHeight:t,viewBoxWidth:e,tooltipContent:g,xCoordinate:v,hasXAxis:a,hasBarLabel:T,activeDataIndex:p,barColorChangeOnHover:h})]})};ae.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:"막대 차트의 너비"},viewBoxHeight:{required:!0,tsType:{name:"number"},description:"막대 차트의 높이"},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"X축과 X축 레이블 표시 여부",defaultValue:{value:"false",computed:!1}},hasBarGradient:{required:!1,tsType:{name:"boolean"},description:"막대의 그라데이션 표시 여부",defaultValue:{value:"false",computed:!1}},showXGuideLine:{required:!1,tsType:{name:"boolean"},description:"X축 가이드 라인 표시 여부 (X축과 수직으로 표시되는 점선, 개수는 x축 데이터와 동일)",defaultValue:{value:"false",computed:!1}},showYGuideLine:{required:!1,tsType:{name:"boolean"},description:"Y축 가이드 라인 표시 여부 (Y축과 수평으로 표시되는 점선)",defaultValue:{value:"false",computed:!1}},yGuideLineCount:{required:!0,tsType:{name:"number"},description:"Y축 가이드 라인 개수 (Y축과 수평으로 표시되는 점선의 개수)"},barChartSeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:"막대 차트 첫 번쩨 데이터 (실시간 데이터 or 단일 데이터) - 차트의 색상은 primarySeries의 color 속성에 따라 자동으로 설정됨"},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"각 데이터의 툴팁 표시 여부",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:"각 데이터의 툴팁 내용 표시 함수 (실시간 데이터와 평균 데이터의 값을 받아 표시 ex: (mainY, subY) => {mainY} {subY}))",defaultValue:{value:"(...args: string[]) => args.join(' ')",computed:!1}},chartTitle:{required:!1,tsType:{name:"string"},description:"막대 차트 제목 (title 태그 내용: 스크린 리더 접근성 시 사용)"},chartDescription:{required:!1,tsType:{name:"string"},description:"막대 차트 설명 (desc 태그 내용: 스크린 리더 접근성 시 사용)"},xAxisType:{required:!0,tsType:{name:"XAxisType"},description:"X축 타입 (일반, 양쪽 세로선, 오른쪽 화살표)"},hasBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 레이블 표시 여부",defaultValue:{value:"true",computed:!1}},activeDataIndex:{required:!1,tsType:{name:"number"},description:"현재 포커스된 데이터의 인덱스"},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"바 호버 시 색상 변경할 건지",defaultValue:{value:"true",computed:!1}}}};export{ae as B,W as a,C as b,q as c,Q as g};
