import{j as o}from"./jsx-runtime-u17CrQMm.js";import{r as a}from"./iframe-B4Qs25KC.js";import"./periods-BlCP1VCB.js";import{a as l,b as m}from"./RevenueCalendar-DQFpbTiz.js";import{R as f}from"./RefreshControl-B0ncCisQ.js";import{S as h}from"./SectionTitle-Ut116A3s.js";function y(e,n){const t=l(),r=t.getQueryCache();return a.useSyncExternalStore(a.useCallback(s=>r.subscribe(m.batchCalls(s)),[r]),()=>t.isFetching(e),()=>t.isFetching(e))}const g=({prefixKey:e,initLastUpdatedNow:n=!0})=>{const t=l(),[r,s]=a.useState(n?new Date:null),c=a.useCallback(()=>s(new Date),[]),d=y({queryKey:e})>0,u=a.useCallback(async()=>{const i=new Date;await t.refetchQueries({queryKey:e,type:"active"},{throwOnError:!0}),s(i)},[t,e]);return{lastUpdatedDate:r,isFetching:d,refresh:u,updateLastUpdatedDateToNow:c}},C=({title:e,description:n,prefixKey:t,initLastUpdatedNow:r,triggerUpdateRefreshDate:s,rightSlot:c})=>{const{lastUpdatedDate:p,isFetching:d,refresh:u,updateLastUpdatedDateToNow:i}=g({prefixKey:t,initLastUpdatedNow:r});return a.useEffect(()=>{s&&i()},[s,i]),o.jsxs("header",{className:"flex justify-between gap-600",children:[o.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[o.jsx(h,{title:e,description:n}),o.jsx(f,{lastUpdatedDate:p,onRefresh:u,isLoading:d})]}),c]})};C.__docgenInfo={description:"",methods:[],displayName:"SectionHeader",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},prefixKey:{required:!0,tsType:{name:"QueryKey"},description:""},initLastUpdatedNow:{required:!1,tsType:{name:"boolean"},description:""},triggerUpdateRefreshDate:{required:!1,tsType:{name:"number"},description:""},rightSlot:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{C as S};
