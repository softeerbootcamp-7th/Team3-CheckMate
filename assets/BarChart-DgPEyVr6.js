import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as c}from"./iframe-BUgc-vLh.js";import{c as F}from"./periods-BlCP1VCB.js";import{g as H,a as k,Y as U,X as w,b as G,c as K}from"./YGuideLine-CJ4NRfyT.js";import{R as I}from"./rankingColors-YVpIGQhO.js";import{f as P}from"./formatNumber-DmvtO23a.js";import{e as W,f as Z,g as z}from"./toggle-group-DPCzWDzQ.js";const g={XAXIS_STROKE_WIDTH:1.5,XAXIS_Y_OFFSET:28,DEFAULT_BAR_COLOR:"var(--color-grey-600)",LABEL_TEXT_COLOR:"var(--color-grey-900)",LABEL_FONT_SIZE:14,LABEL_FONT_WEIGHT:500,SUB_LABEL_TEXT_COLOR:"var(--color-grey-500)",SUB_LABEL_FONT_SIZE:12,LABEL_GAP:20,ACTIVATE_BAR_COLOR:"var(--color-brand-500)",BAR_RADIUS:4,ANIMATION_DURATION_MS:500},x={TOP_RANK:3,RANK_COLOR:[I[0],I[1],I[2],I[4]]},E=({series:e})=>Array.isArray(e.data.mainY[0]),Q=({stackBarData:e,barTopY:t,barHeight:a,totalAmount:n})=>[...e].sort((o,u)=>Number(u.amount)-Number(o.amount)).reduce((o,u,i)=>{const l=Number(u.amount)||0;if(i>x.TOP_RANK)return o;const b=t+o.percentage/100*a,p=n>0?i<x.TOP_RANK?Math.round(l/n*100*10)/10:100-o.percentage:0,A=p/100*a;return{percentage:o.percentage+p,barSegmentInfoList:[...o.barSegmentInfoList,{y:b,barHeight:A,percentage:Math.round(p*10)/10,label:i>=x.TOP_RANK?"기타":u.label,color:u.color??x.RANK_COLOR[i]}]}},{percentage:0,barSegmentInfoList:[]}).barSegmentInfoList,J=({tooltipContent:e,label:t,percentage:a,totalAmount:n})=>e?e(t,`${Math.round(a/100*n)}건`,"(",`${a}%`,")"):null,ee=({stackBarData:e})=>e.reduce((t,a)=>t+(Number(a.amount)||0),0),te=({y:e,hasXAxis:t,viewBoxHeight:a})=>{const{XAXIS_Y_OFFSET:n,XAXIS_STROKE_WIDTH:r}=g;return t?a-n-e-r/2:a-e},ae=({viewBoxWidth:e,xDataLength:t})=>e/t*.5,$=({isStackBar:e,isSubLabel:t,index:a,series:n})=>{if(t){const r=n.data.mainY[a];return`${r.amount}${r.unit}`}else if(e){const r=n.data.mainY[a],o=r.reduce((i,l)=>typeof l.amount=="number"?i+l.amount:i,0),u=r[0]?.unit||"";return`${o} ${u}`}else{const r=n.data.mainY[a];return`${P(Number(r.amount))}${r.unit}`}},re=()=>{const e=c.useId(),t=c.useId();return{titleId:e,descId:t}},ne=({viewBoxWidth:e,viewBoxHeight:t,primarySeries:a,hasXAxis:n=!1})=>{const[r,o]=c.useState(t),u=c.useRef(null),i=c.useRef(null),l=E({series:a}),b=c.useMemo(()=>a.data.mainX.map(d=>d.amount??""),[a.data.mainX]),p=c.useMemo(()=>a.data.mainX.length===0?[]:H({svgWidth:e,xDataLength:a.data.mainX.length}),[e,a.data.mainX.length]),A=c.useMemo(()=>{const d=l?a.data.mainY.map(T=>T.reduce((q,y)=>q+(Number(y.amount)||0),0)):a.data.mainY.map(T=>T.amount),m=d.length>0?Math.max(...d.filter(T=>T!==null).map(Number)):10;return Math.ceil(Math.ceil(m*1.5)/10)*10},[a.data.mainY,l]),f=c.useMemo(()=>{if(a.data.mainX.length===0)return[];const d=l?{...a,data:{...a.data,mainY:a.data.mainY.map(m=>({amount:m.reduce((L,T)=>L+(Number(T.amount)||0),0),unit:m[0]?.unit||""}))}}:a;return k({svgWidth:e,adjustedHeight:r,xDataLength:d.data.mainX.length,yData:d.data.mainY,maximumY:A})},[e,r,a,A,l]);return c.useLayoutEffect(()=>{(()=>{if(!n||!i.current){o(t);return}const m=i.current.getBBox();o(m.y+m.height/2)})()},[n,t]),{svgWidth:e,adjustedHeight:r,xLabelList:b,xCoordinate:p,primaryCoordinate:f,svgRef:u,xAxisRef:i}},se=({barMiddleX:e,barTopY:t,width:a,height:n,radius:r})=>{const o=t+n,u=e-a/2,i=e+a/2;return{pathD:r?`
      M ${e} ${t}
      H ${u+r}
      Q ${u} ${t} ${u} ${t+r}
      V ${o}
      H ${i}
      V ${t+r}
      Q ${i} ${t} ${i-r} ${t}
      Z
    `:`
      M ${e} ${t}
      H ${u}
      V ${o}
      H ${i}
      V ${t}
      Z
    `}},j=({barRef:e,hasAnimation:t})=>{c.useLayoutEffect(()=>{if(!e||!e.current||!t)return;e.current.style.transform="scaleY(0)";const a=requestAnimationFrame(()=>{e.current&&(e.current.style.transition=`transform ${g.ANIMATION_DURATION_MS}ms ease-out`,e.current.style.transform="scaleY(1)")});return()=>cancelAnimationFrame(a)},[e,t])},ie=({pathRef:e,hasAnimation:t})=>{c.useEffect(()=>{!e.current||!t||(e.current.style.transition=`d ${g.ANIMATION_DURATION_MS}ms ease-in-out`)},[e,t])},N=({barMiddleX:e,barTopY:t,width:a,height:n,radius:r,hasInitAnimation:o=!0,hasMoveAnimation:u=!0,hasGradient:i=!0,activeTooltip:l=!1,tooltipContentText:b,bgColor:p=g.DEFAULT_BAR_COLOR,isActive:A=!1,barColorChangeOnHover:f=!0,className:d})=>{const m=c.useRef(null),L=c.useRef(null),T=Math.min(r??0,a/2,n),{pathD:q}=se({barMiddleX:e,barTopY:t,width:a,height:n,radius:T});j({barRef:L,hasAnimation:o}),ie({pathRef:m,hasAnimation:u});const y=s.jsx("path",{ref:m,d:q,fill:A?g.ACTIVATE_BAR_COLOR:p,className:F(f&&"hover:fill-brand-main"),style:{maskImage:i?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":"",WebkitMaskImage:i?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":""}});return s.jsx(s.Fragment,{children:s.jsx("g",{ref:L,style:{transformOrigin:`${e}px ${t+n}px`},className:d,children:l?s.jsxs(W,{children:[s.jsx(Z,{asChild:!0,children:y}),s.jsx(z,{side:"left",className:"bg-grey-800 transition-duration-200 px-250! text-gray-50 [&_svg]:invisible",children:b})]}):y})})};N.__docgenInfo={description:"",methods:[],displayName:"Bar",props:{barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:""},hasInitAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasMoveAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContentText:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},isActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},bgColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};const v=({x:e,y:t,label:a,labelOptions:n,offsetY:r=8})=>{const{fontWeight:o=g.LABEL_FONT_WEIGHT,fontSize:u=g.LABEL_FONT_SIZE,textColor:i=g.LABEL_TEXT_COLOR,textAnchor:l="middle"}=n||{};return s.jsx("text",{x:0,y:0,fill:i,textAnchor:l,fontSize:u,fontWeight:o,style:{transform:`translate(${e}px, ${t-r}px)`,transition:`transform ${g.ANIMATION_DURATION_MS}ms ease-in-out`},children:a})};v.__docgenInfo={description:"",methods:[],displayName:"BarLabel",props:{x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},label:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},offsetY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},labelOptions:{required:!1,tsType:{name:"LabelOption"},description:""}}};const V=({stackBarData:e,barMiddleX:t,barTopY:a,width:n,height:r,radius:o=Math.min(r,n,4),hasAnimation:u=!0,activeTooltip:i=!0,tooltipContent:l})=>{const b=c.useRef(null);j({barRef:b,hasAnimation:u});const p=ee({stackBarData:e}),A=Q({stackBarData:e,barTopY:a,barHeight:r,totalAmount:p});return s.jsx(s.Fragment,{children:s.jsx("g",{ref:b,style:{transformOrigin:`${t}px ${a+r}px`},children:A.map((f,d)=>s.jsx(N,{barMiddleX:t,barTopY:f.y,width:n,height:f.barHeight,bgColor:f.color??"#eee",radius:d===0?o:0,hasInitAnimation:!1,hasMoveAnimation:!0,hasGradient:!1,activeTooltip:i,barColorChangeOnHover:!1,tooltipContentText:J({tooltipContent:l,label:f.label,percentage:f.percentage,totalAmount:p})||""},`${f.label}-${d}`))})})};V.__docgenInfo={description:"",methods:[],displayName:"StackBar",props:{stackBarData:{required:!0,tsType:{name:"Array",elements:[{name:"StackBarSegment"}],raw:"StackBarSegment[]"},description:""},barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"Math.min(height, width, 4)",computed:!0}},hasAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""}}};const X=({coordinate:e,color:t=g.DEFAULT_BAR_COLOR,hasGradient:a=!1,primarySeries:n,secondarySeries:r,showBarLabel:o=!0,showSubBarLabel:u=!0,labelOption:i,subLabelOption:l,hasXAxis:b=!1,viewBoxHeight:p,viewBoxWidth:A,xCoordinate:f,tooltipContent:d,activeTooltip:m,activeDataIndex:L,barColorChangeOnHover:T})=>{const{BAR_RADIUS:q}=g,y=E({series:n});return s.jsx(s.Fragment,{children:e.map(({x:O,y:h},_)=>{if(O!==null&&h!==null){const B=te({y:h,hasXAxis:b,viewBoxHeight:p}),C=ae({viewBoxWidth:A,xDataLength:f.length}),R=d?d(n.data.mainY[_].amount?.toString()??"",n.data.mainY[_].unit?.toString()??""):null;return s.jsxs("g",{children:[r&&u&&s.jsx(v,{x:O,y:h-g.LABEL_GAP,label:$({isStackBar:y,isSubLabel:!0,index:_,series:r}),labelOptions:{...l,textColor:l?.textColor??g.SUB_LABEL_TEXT_COLOR,fontSize:l?.fontSize??g.SUB_LABEL_FONT_SIZE}}),o&&s.jsx(v,{x:O,y:h,label:$({isStackBar:y,index:_,series:n}),labelOptions:i}),y?s.jsx(V,{stackBarData:n.data.mainY[_],barMiddleX:O,barTopY:h,height:B,width:C,radius:q,activeTooltip:m,tooltipContent:d}):s.jsx(N,{barMiddleX:O,barTopY:h,height:B,width:C,radius:q,hasGradient:a,bgColor:t,activeTooltip:m,tooltipContentText:R,isActive:L===_,barColorChangeOnHover:T})]},n.data.mainX[_].amount)}})})};X.__docgenInfo={description:"",methods:[],displayName:"BarSeries",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""},primarySeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:""},secondarySeries:{required:!1,tsType:{name:"AllBarChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},showBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showSubBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},labelOption:{required:!1,tsType:{name:"LabelOption"},description:""},subLabelOption:{required:!1,tsType:{name:"LabelOption"},description:""},viewBoxHeight:{required:!0,tsType:{name:"number"},description:""},viewBoxWidth:{required:!0,tsType:{name:"number"},description:""},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""},xCoordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},activeDataIndex:{required:!1,tsType:{name:"number"},description:""},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:""}}};const oe=({viewBoxWidth:e,viewBoxHeight:t,hasXAxis:a=!1,hasBarGradient:n=!1,showXGuideLine:r=!1,showYGuideLine:o=!1,primarySeries:u,secondarySeries:i,yGuideLineCount:l=0,activeTooltip:b=!1,tooltipContent:p=(...h)=>h.join(" "),chartTitle:A,chartDescription:f,showBarLabel:d=!0,showSubBarLabel:m=!0,labelOption:L,subLabelOption:T,xAxisType:q,activeDataIndex:y,barColorChangeOnHover:O=!0})=>{const{titleId:h,descId:_}=re(),{svgWidth:B,adjustedHeight:C,xLabelList:R,xCoordinate:S,primaryCoordinate:D,svgRef:M,xAxisRef:Y}=ne({viewBoxWidth:e,viewBoxHeight:t,primarySeries:u,hasXAxis:a});return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e} ${t}`,width:e,height:t,ref:M,role:"graphics-document","aria-labelledby":h,"aria-describedby":_,children:[s.jsxs("g",{children:[s.jsx("title",{id:h,children:A}),s.jsx("desc",{id:_,children:f})]}),o&&s.jsx(U,{svgWidth:B,adjustedHeight:C,yGuideLineCount:l}),r&&s.jsx(w,{xCoordinate:S,adjustedHeight:C}),a&&s.jsxs(s.Fragment,{children:[s.jsx(G,{viewBoxWidth:e,viewBoxHeight:t,axisType:q,ref:Y}),s.jsx(K,{xLabelList:R,xCoordinate:S,viewBoxHeight:t})]}),s.jsx(X,{coordinate:D,hasGradient:n,primarySeries:u,secondarySeries:i,activeTooltip:b,viewBoxHeight:t,viewBoxWidth:e,tooltipContent:p,xCoordinate:S,hasXAxis:a,showBarLabel:d,labelOption:L,showSubBarLabel:m,subLabelOption:T,activeDataIndex:y,barColorChangeOnHover:O})]})};oe.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:"막대 차트의 너비"},viewBoxHeight:{required:!0,tsType:{name:"number"},description:"막대 차트의 높이"},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"X축과 X축 레이블 표시 여부",defaultValue:{value:"false",computed:!1}},hasBarGradient:{required:!1,tsType:{name:"boolean"},description:"막대의 그라데이션 표시 여부",defaultValue:{value:"false",computed:!1}},showXGuideLine:{required:!1,tsType:{name:"boolean"},description:"X축 가이드 라인 표시 여부 (X축과 수직으로 표시되는 점선, 개수는 x축 데이터와 동일)",defaultValue:{value:"false",computed:!1}},showYGuideLine:{required:!1,tsType:{name:"boolean"},description:"Y축 가이드 라인 표시 여부 (Y축과 수평으로 표시되는 점선)",defaultValue:{value:"false",computed:!1}},yGuideLineCount:{required:!1,tsType:{name:"number"},description:"Y축 가이드 라인 개수 (Y축과 수평으로 표시되는 점선의 개수)",defaultValue:{value:"0",computed:!1}},primarySeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:"막대 차트 첫 번쩨 데이터 (실시간 데이터 or 단일 데이터) - 차트의 색상은 primarySeries의 color 속성에 따라 자동으로 설정됨"},secondarySeries:{required:!1,tsType:{name:"AllBarChartSeries"},description:"막대 차트 두 번쩨 데이터 sub라벨용"},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"각 데이터의 툴팁 표시 여부",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:"각 데이터의 툴팁 내용 표시 함수 (실시간 데이터와 평균 데이터의 값을 받아 표시 ex: (mainY, subY) => {mainY} {subY}))",defaultValue:{value:"(...args: string[]) => args.join(' ')",computed:!1}},chartTitle:{required:!1,tsType:{name:"string"},description:"막대 차트 제목 (title 태그 내용: 스크린 리더 접근성 시 사용)"},chartDescription:{required:!1,tsType:{name:"string"},description:"막대 차트 설명 (desc 태그 내용: 스크린 리더 접근성 시 사용)"},xAxisType:{required:!0,tsType:{name:"XAxisType"},description:"X축 타입 (일반, 양쪽 세로선, 오른쪽 화살표)"},showBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 레이블 표시 여부 -> primarySeries의 데이터 값이 레이블로 표시됨",defaultValue:{value:"true",computed:!1}},showSubBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 서브 레이블 표시 여부 -> secondarySeries의 데이터 값이 레이블로 표시됨",defaultValue:{value:"true",computed:!1}},labelOption:{required:!1,tsType:{name:"LabelOption"},description:"각 막대 위에 레이블 옵션"},subLabelOption:{required:!1,tsType:{name:"LabelOption"},description:"각 막대 위에 서브 레이블 옵션"},activeDataIndex:{required:!1,tsType:{name:"number"},description:"현재 포커스된 데이터의 인덱스"},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"바 호버 시 색상 변경할 건지",defaultValue:{value:"true",computed:!1}}}};export{oe as B,te as a,N as b,g as c,ae as g};
