import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as d}from"./iframe-Bfet6v_Q.js";import{c as E}from"./periods-BlCP1VCB.js";import{g as O,a as Y,L as I,Y as V,X as w,b as F,c as H}from"./YGuideLine-BGvu-miB.js";import{e as P,f as K,g as U}from"./toggle-group-CYvjHKBg.js";const T=t=>t.filter(n=>n.y!==null),z=({coordinate:t})=>{const n=T(t),r=n.reduce((a,{x:o,y:s},i)=>i===0?`M ${o} ${s}`:`${a} L ${o} ${s}`,"");return{filteredCoordinate:n,pathD:r}},J=({coordinateCount:t,pathD:n})=>{const r=d.useRef(null),a=d.useRef(0),o=d.useRef(0);return d.useLayoutEffect(()=>{const s=r.current;if(!s||!n)return;let i=null;if(o.current!==t){const u=s.getTotalLength();s.style.strokeDasharray=`${u}`,s.style.strokeDashoffset=`${u-a.current}`,s.style.transition="none",i=requestAnimationFrame(()=>{s&&(s.style.transition="stroke-dashoffset 1s ease-in-out",s.style.strokeDashoffset="0",o.current=t,a.current=u)})}else s.style.removeProperty("stroke-dasharray"),s.style.removeProperty("stroke-dashoffset"),s.style.transition="d 0.5s ease-in-out";return()=>{i&&cancelAnimationFrame(i)}},[n,t]),{lineRef:r}},Q=()=>{const t=d.useId(),n=d.useId(),r=d.useId(),a=d.useId();return{lineGradientId:t,backgroundGradientId:n,titleId:r,descId:a}},Z=({viewBoxWidth:t,viewBoxHeight:n,primarySeries:r,secondarySeries:a,hasXAxis:o=!1})=>{const[s,i]=d.useState(n),u=d.useRef(null),l=d.useRef(null),g=d.useMemo(()=>r.data.mainX.map(c=>c.amount??""),[r.data.mainX]),y=d.useMemo(()=>r.data.mainX.length===0?[]:O({svgWidth:t,xDataLength:r.data.mainX.length}),[t,r.data.mainX.length]),m=d.useMemo(()=>{const c=[...r.data.mainY.map(f=>f.amount),...a?.data.mainY.map(f=>f.amount)??[]].flat(),p=c.length>0?Math.max(...c.filter(f=>f!==null).map(Number)):10;return Math.ceil(Math.ceil(p*1.5)/10)*10},[r.data.mainY,a?.data.mainY]),x=d.useMemo(()=>r.data.mainX.length===0?[]:Y({svgWidth:t,adjustedHeight:s,xDataLength:r.data.mainX.length,yData:r.data.mainY,maximumY:m}),[t,s,r,m]),j=d.useMemo(()=>{const c=T(x);return c.length===0?0:c[c.length-1].x},[x]),h=d.useMemo(()=>a===void 0||a.data.mainX.length===0?[]:Y({svgWidth:t,adjustedHeight:s,xDataLength:a.data.mainX.length,yData:a.data.mainY,maximumY:m}),[t,s,a,m]);return d.useLayoutEffect(()=>{(()=>{if(!o||!l.current){i(n);return}const p=l.current.getBBox();i(p.y+p.height/2)})()},[o,n]),{svgWidth:t,adjustedHeight:s,xLabelList:g,xCoordinate:y,lastXCoordinate:j,primaryCoordinate:x,secondaryCoordinate:h,svgRef:u,xAxisRef:l,filterCoordinate:T}},X=d.memo(({adjustedHeight:t,lastXCoordinate:n,gradientId:r})=>e.jsx("rect",{x:0,y:0,width:n,height:t,fill:`url(#${r})`,className:"transition-all duration-1000"}));X.displayName="GradientBackground";X.__docgenInfo={description:"",methods:[],displayName:"GradientBackground",props:{adjustedHeight:{required:!0,tsType:{name:"number"},description:""},lastXCoordinate:{required:!0,tsType:{name:"number"},description:""},gradientId:{required:!0,tsType:{name:"string"},description:""}}};const D=({lineGradientId:t,backgroundGradientId:n})=>{const{GRADIENT_COLOR:r}=I;return e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:t,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:"0.3"}),e.jsx("stop",{offset:"75%",stopColor:r,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:r,stopOpacity:"0.7"})]}),n&&e.jsxs("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:"0"}),e.jsx("stop",{offset:"73.97%",stopColor:r,stopOpacity:"0.03"}),e.jsx("stop",{offset:"100%",stopColor:r,stopOpacity:"0.06"})]})]})};D.__docgenInfo={description:"",methods:[],displayName:"LineChartGradient",props:{lineGradientId:{required:!0,tsType:{name:"string"},description:""},backgroundGradientId:{required:!1,tsType:{name:"string"},description:""}}};const b=({x:t,y:n,color:r,ariaLabel:a,hasHoverEffect:o=!1,className:s})=>{const{DOT_RADIUS:i}=I;return e.jsx("circle",{cx:t,cy:n,r:i,fill:r,stroke:"none",role:"graphics-symbol",tabIndex:-1,"aria-label":a,className:E(o&&"hover:brightness-75 hover:saturate-200",s),style:{transition:"cx 0.5s ease-in-out, cy 0.5s ease-in-out"}})};b.__docgenInfo={description:"",methods:[],displayName:"Dot",props:{x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},color:{required:!0,tsType:{name:"string"},description:""},hasHoverEffect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},ariaLabel:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const _=({series:t,activeTooltip:n,tooltipContent:r,coordinate:a,color:o})=>{const s=T(a);return n?e.jsx(e.Fragment,{children:s.map(({x:i,y:u},l)=>{const g=`${t.data.mainY[l].amount??""}${t.data.mainY[l].unit??""}`,y=`${t.data.subY[l]?.amount??""}${t.data.subY[l]?.unit??""}`,m=r(g,y);return e.jsxs(P,{children:[e.jsx(K,{asChild:!0,children:e.jsx("g",{children:e.jsx(b,{x:i,y:u,color:o,ariaLabel:m,hasHoverEffect:!0})})}),e.jsx(U,{side:"top",className:"rounded-150 bg-grey-900 [&_svg]:fill-grey-900 [&_svg]:-translate-y-1 [&_svg]:rotate-0",children:e.jsx("p",{className:"text-grey-100 caption-medium-semibold",children:m})})]},l)})}):e.jsx(e.Fragment,{children:s.map(({x:i,y:u},l)=>e.jsx(b,{x:i,y:u,color:o,ariaLabel:`${t.data.mainX[l].amount} ${t.data.mainX[l].unit}`,hasHoverEffect:!1},l))})};_.__docgenInfo={description:"",methods:[],displayName:"Dots",props:{series:{required:!0,tsType:{name:"LineChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},tooltipContent:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""},coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!0,tsType:{name:"string"},description:""}}};const G=({coordinate:t,color:n,hasGradient:r=!1,gradientId:a})=>{const{LINE_STROKE_WIDTH:o}=I,{filteredCoordinate:s,pathD:i}=z({coordinate:t}),{lineRef:u}=J({coordinateCount:s.length,pathD:i});return e.jsx("path",{d:i,stroke:r?`url(#${a})`:n,strokeWidth:o,fill:"none",ref:u})};G.__docgenInfo={description:"",methods:[],displayName:"Line",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!0,tsType:{name:"string"},description:""},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""}}};const q=({coordinate:t,color:n,hasGradient:r=!1,gradientId:a,series:o,activeTooltip:s,tooltipContent:i})=>e.jsxs(e.Fragment,{children:[e.jsx(G,{coordinate:t,color:n,hasGradient:r,gradientId:a}),e.jsx(_,{series:o,activeTooltip:s,tooltipContent:i,coordinate:t,color:n})]});q.__docgenInfo={description:"",methods:[],displayName:"LineSeries",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!0,tsType:{name:"string"},description:""},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""},series:{required:!0,tsType:{name:"LineChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},tooltipContent:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""}}};const W=({viewBoxWidth:t,viewBoxHeight:n,hasXAxis:r=!1,hasGradient:a=!1,showXGuideLine:o=!1,showYGuideLine:s=!1,primarySeries:i,secondarySeries:u,yGuideLineCount:l,activeTooltip:g=!1,tooltipContent:y=(...h)=>h.join(" "),chartTitle:m,chartDescription:x,xAxisType:j})=>{const{lineGradientId:h,backgroundGradientId:c,titleId:p,descId:C}=Q(),{svgWidth:f,adjustedHeight:L,xLabelList:v,xCoordinate:A,lastXCoordinate:R,primaryCoordinate:N,secondaryCoordinate:$,svgRef:k,xAxisRef:M}=Z({viewBoxWidth:t,viewBoxHeight:n,primarySeries:i,secondarySeries:u,hasXAxis:r});return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:n,viewBox:`0 0 ${t} ${n}`,ref:k,role:"graphics-document","aria-labelledby":p,"aria-describedby":C,children:[e.jsxs("g",{children:[e.jsx("title",{id:p,children:m}),e.jsx("desc",{id:C,children:x})]}),e.jsx(D,{lineGradientId:h,backgroundGradientId:c}),a&&e.jsx(X,{adjustedHeight:L,lastXCoordinate:R,gradientId:c}),s&&e.jsx(V,{svgWidth:f,adjustedHeight:L,yGuideLineCount:l}),o&&e.jsx(w,{xCoordinate:A,adjustedHeight:L}),r&&e.jsxs(e.Fragment,{children:[e.jsx(F,{viewBoxWidth:t,viewBoxHeight:n,axisType:j,ref:M}),e.jsx(H,{xLabelList:v,xCoordinate:A,viewBoxHeight:n})]}),u&&e.jsx(q,{coordinate:$,color:u.color,series:u,activeTooltip:g,tooltipContent:y}),e.jsx(q,{coordinate:N,color:i.color,hasGradient:a,gradientId:h,series:i,activeTooltip:g,tooltipContent:y})]})};W.__docgenInfo={description:"",methods:[],displayName:"LineChart",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:"꺾은선 차트의 너비"},viewBoxHeight:{required:!0,tsType:{name:"number"},description:"꺾은선 차트의 높이"},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"X축과 X축 레이블 표시 여부",defaultValue:{value:"false",computed:!1}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"꺾은선 차트의 그라데이션 표시 여부 (실시간 + 과거 데이터 표시 시 사용)",defaultValue:{value:"false",computed:!1}},showXGuideLine:{required:!1,tsType:{name:"boolean"},description:"X축 가이드 라인 표시 여부 (X축과 수직으로 표시되는 점선, 개수는 x축 데이터와 동일)",defaultValue:{value:"false",computed:!1}},showYGuideLine:{required:!1,tsType:{name:"boolean"},description:"Y축 가이드 라인 표시 여부 (Y축과 수평으로 표시되는 점선)",defaultValue:{value:"false",computed:!1}},yGuideLineCount:{required:!0,tsType:{name:"number"},description:"Y축 가이드 라인 개수 (Y축과 수평으로 표시되는 점선의 개수)"},primarySeries:{required:!0,tsType:{name:"LineChartSeries"},description:"꺾은선 차트 첫 번쩨 데이터 (실시간 데이터 or 단일 데이터) - 차트의 색상은 primarySeries의 color 속성에 따라 자동으로 설정됨"},secondarySeries:{required:!1,tsType:{name:"LineChartSeries"},description:"꺾은선 차트 두 번쩨 데이터 (평균 데이터) - 차트의 색상은 secondarySeries의 color 속성에 따라 자동으로 설정됨"},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"각 데이터의 툴팁 표시 여부",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:"각 데이터의 툴팁 내용 표시 함수 (실시간 데이터와 평균 데이터의 값을 받아 표시 ex: (mainY, subY) => {mainY} {subY}))",defaultValue:{value:"(...args: string[]) => args.join(' ')",computed:!1}},chartTitle:{required:!1,tsType:{name:"string"},description:"꺾은선 차트 제목 (title 태그 내용: 스크린 리더 접근성 시 사용)"},chartDescription:{required:!1,tsType:{name:"string"},description:"꺾은선 차트 설명 (desc 태그 내용: 스크린 리더 접근성 시 사용)"},xAxisType:{required:!0,tsType:{name:"XAxisType"},description:"X축 타입 (일반, 양쪽 세로선, 오른쪽 화살표)"}}};export{b as D,W as L,D as a,G as b};
