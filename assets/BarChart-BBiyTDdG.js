import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as c}from"./iframe-B4Qs25KC.js";import{c as D}from"./periods-BlCP1VCB.js";import{g as F,a as H,Y as U,X as w,b as G,c as k}from"./YGuideLine-R9Vw4O_s.js";import{R as x}from"./rankingColors-YVpIGQhO.js";import{f as K}from"./formatNumber-BQOenjuh.js";import{e as W,f as Z,g as P}from"./toggle-group-8MMW6rG-.js";const f={XAXIS_STROKE_WIDTH:1.5,XAXIS_Y_OFFSET:28,DEFAULT_BAR_COLOR:"var(--color-grey-600)",LABEL_TEXT_COLOR:"var(--color-grey-900)",LABEL_FONT_SIZE:14,LABEL_FONT_WEIGHT:500,SUB_LABEL_TEXT_COLOR:"var(--color-grey-500)",SUB_LABEL_FONT_SIZE:12,LABEL_GAP:20,ACTIVATE_BAR_COLOR:"var(--color-brand-500)",BAR_RADIUS:4,ANIMATION_DURATION_MS:500},z={RANK_COLOR:[x[0],x[1],x[2],x[4]]},j=({series:e})=>Array.isArray(e.data.mainY[0]),Q=({stackBarData:e,barTopY:t,barHeight:a,totalAmount:n,barSegmentCount:r})=>e.reduce((u,o,i)=>{const l=Number(o.amount)||0,T=t+u.percentage/100*a,p=i===r-1?Math.round(Math.max(0,100-u.percentage)*10)/10:n>0?Math.round(l/n*100*10)/10:0,b=p/100*a;return{percentage:u.percentage+p,barSegmentInfoList:[...u.barSegmentInfoList,{y:T,barHeight:b,percentage:p,label:o.label,color:o.color??z.RANK_COLOR[i]}]}},{percentage:0,barSegmentInfoList:[]}).barSegmentInfoList,J=({stackBarData:e})=>e.reduce((t,a)=>t+(Number(a.amount)||0),0),ee=({y:e,hasXAxis:t,viewBoxHeight:a})=>{const{XAXIS_Y_OFFSET:n,XAXIS_STROKE_WIDTH:r}=f;return t?a-n-e-r/2:a-e},te=({viewBoxWidth:e,xDataLength:t})=>e/t*.5,E=({isStackBar:e,isSubLabel:t,index:a,series:n})=>{if(t&&!e){const r=n.data.mainY[a];return`${r.amount}${r.unit}`}else if(e){const r=n.data.mainY[a],u=r.reduce((i,l)=>typeof l.amount=="number"?i+l.amount:i,0),o=r[0]?.unit||"";return`${u} ${o}`}else{const r=n.data.mainY[a];return`${K(Number(r.amount))}${r.unit}`}},ae=()=>{const e=c.useId(),t=c.useId();return{titleId:e,descId:t}},re=({viewBoxWidth:e,viewBoxHeight:t,primarySeries:a,hasXAxis:n=!1})=>{const[r,u]=c.useState(t),o=c.useRef(null),i=c.useRef(null),l=j({series:a}),T=c.useMemo(()=>a.data.mainX.map(d=>d.amount??""),[a.data.mainX]),p=c.useMemo(()=>a.data.mainX.length===0?[]:F({svgWidth:e,xDataLength:a.data.mainX.length}),[e,a.data.mainX.length]),b=c.useMemo(()=>{const d=l?a.data.mainY.map(g=>g.reduce((q,A)=>q+(Number(A.amount)||0),0)):a.data.mainY.map(g=>g.amount),m=d.length>0?Math.max(...d.filter(g=>g!==null).map(Number)):10;return Math.ceil(Math.ceil(m*1.5)/10)*10},[a.data.mainY,l]),L=c.useMemo(()=>{if(a.data.mainX.length===0)return[];const d=l?{...a,data:{...a.data,mainY:a.data.mainY.map(m=>({amount:m.reduce((_,g)=>_+(Number(g.amount)||0),0),unit:m[0]?.unit||""}))}}:a;return H({svgWidth:e,adjustedHeight:r,xDataLength:d.data.mainX.length,yData:d.data.mainY,maximumY:b})},[e,r,a,b,l]);return c.useLayoutEffect(()=>{(()=>{if(!n||!i.current){u(t);return}const m=i.current.getBBox();u(m.y+m.height/2)})()},[n,t]),{svgWidth:e,adjustedHeight:r,xLabelList:T,xCoordinate:p,primaryCoordinate:L,svgRef:o,xAxisRef:i}},ne=({barMiddleX:e,barTopY:t,width:a,height:n,radius:r})=>{const u=t+n,o=e-a/2,i=e+a/2;return{pathD:r?`
      M ${e} ${t}
      H ${o+r}
      Q ${o} ${t} ${o} ${t+r}
      V ${u}
      H ${i}
      V ${t+r}
      Q ${i} ${t} ${i-r} ${t}
      Z
    `:`
      M ${e} ${t}
      H ${o}
      V ${u}
      H ${i}
      V ${t}
      Z
    `}},$=({barRef:e,hasAnimation:t})=>{c.useLayoutEffect(()=>{if(!e||!e.current||!t)return;e.current.style.transform="scaleY(0)";const a=requestAnimationFrame(()=>{e.current&&(e.current.style.transition=`transform ${f.ANIMATION_DURATION_MS}ms ease-out`,e.current.style.transform="scaleY(1)")});return()=>cancelAnimationFrame(a)},[e,t])},se=({pathRef:e,hasAnimation:t})=>{c.useEffect(()=>{!e.current||!t||(e.current.style.transition=`d ${f.ANIMATION_DURATION_MS}ms ease-in-out`)},[e,t])},v=({barMiddleX:e,barTopY:t,width:a,height:n,radius:r,hasInitAnimation:u=!0,hasMoveAnimation:o=!0,hasGradient:i=!0,activeTooltip:l=!1,tooltipContentText:T,bgColor:p=f.DEFAULT_BAR_COLOR,isActive:b=!1,barColorChangeOnHover:L=!0,className:d})=>{const m=c.useRef(null),_=c.useRef(null),g=Math.min(r??0,a/2,n),{pathD:q}=ne({barMiddleX:e,barTopY:t,width:a,height:n,radius:g});$({barRef:_,hasAnimation:u}),se({pathRef:m,hasAnimation:o});const A=s.jsx("path",{ref:m,d:q,fill:b?f.ACTIVATE_BAR_COLOR:p,className:D(L&&"hover:fill-brand-main"),style:{maskImage:i?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":"",WebkitMaskImage:i?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":""}});return s.jsx(s.Fragment,{children:s.jsx("g",{ref:_,style:{transformOrigin:`${e}px ${t+n}px`},className:d,children:l?s.jsxs(W,{children:[s.jsx(Z,{asChild:!0,children:A}),s.jsx(P,{side:"left",className:"bg-grey-800 transition-duration-200 px-250! text-gray-50 [&_svg]:invisible",children:T})]}):A})})};v.__docgenInfo={description:"",methods:[],displayName:"Bar",props:{barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:""},hasInitAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasMoveAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContentText:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},isActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},bgColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};const S=({x:e,y:t,label:a,labelOptions:n,offsetY:r=8})=>{const{fontWeight:u=f.LABEL_FONT_WEIGHT,fontSize:o=f.LABEL_FONT_SIZE,textColor:i=f.LABEL_TEXT_COLOR,textAnchor:l="middle"}=n||{};return s.jsx("text",{x:0,y:0,fill:i,textAnchor:l,fontSize:o,fontWeight:u,style:{transform:`translate(${e}px, ${t-r}px)`,transition:`transform ${f.ANIMATION_DURATION_MS}ms ease-in-out`},children:a})};S.__docgenInfo={description:"",methods:[],displayName:"BarLabel",props:{x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},label:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},offsetY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},labelOptions:{required:!1,tsType:{name:"LabelOption"},description:""}}};const N=({stackBarData:e,barMiddleX:t,barTopY:a,width:n,height:r,radius:u=Math.min(r,n,4),hasAnimation:o=!0,activeTooltip:i=!0,tooltipContent:l})=>{const T=c.useRef(null);$({barRef:T,hasAnimation:o});const p=J({stackBarData:e}),b=e.length,L=Q({stackBarData:e,barTopY:a,barHeight:r,totalAmount:p,barSegmentCount:b});return s.jsx(s.Fragment,{children:s.jsx("g",{ref:T,style:{transformOrigin:`${t}px ${a+r}px`},children:L.map((d,m)=>s.jsx(v,{barMiddleX:t,barTopY:d.y,width:n,height:d.barHeight,bgColor:d.color??"#eee",radius:m===0?u:0,hasInitAnimation:!1,hasMoveAnimation:!0,hasGradient:!1,activeTooltip:i,barColorChangeOnHover:!1,tooltipContentText:l?.(d.label,p.toString(),`${d.percentage.toString()}%`)??""},m))})})};N.__docgenInfo={description:"",methods:[],displayName:"StackBar",props:{stackBarData:{required:!0,tsType:{name:"Array",elements:[{name:"StackBarSegment"}],raw:"StackBarSegment[]"},description:""},barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"Math.min(height, width, 4)",computed:!0}},hasAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""}}};const V=({coordinate:e,color:t=f.DEFAULT_BAR_COLOR,hasGradient:a=!1,primarySeries:n,secondarySeries:r,showBarLabel:u=!0,showSubBarLabel:o=!0,labelOption:i,subLabelOption:l,hasXAxis:T=!1,viewBoxHeight:p,viewBoxWidth:b,xCoordinate:L,tooltipContent:d,activeTooltip:m,activeDataIndex:_,barColorChangeOnHover:g})=>{const{BAR_RADIUS:q}=f,A=j({series:n});return s.jsx(s.Fragment,{children:e.map(({x:C,y:h},y)=>{if(C!==null&&h!==null){const I=ee({y:h,hasXAxis:T,viewBoxHeight:p}),O=te({viewBoxWidth:b,xDataLength:L.length}),B=d?d(n.data.mainY[y].amount?.toString()??"",n.data.mainY[y].unit?.toString()??""):null;return s.jsxs("g",{children:[r&&o&&s.jsx(S,{x:C,y:h-f.LABEL_GAP,label:E({isStackBar:A,isSubLabel:!0,index:y,series:r}),labelOptions:{...l,textColor:l?.textColor??f.SUB_LABEL_TEXT_COLOR,fontSize:l?.fontSize??f.SUB_LABEL_FONT_SIZE}}),u&&s.jsx(S,{x:C,y:h,label:E({isStackBar:A,index:y,series:n}),labelOptions:i}),A?s.jsx(N,{stackBarData:n.data.mainY[y],barMiddleX:C,barTopY:h,height:I,width:O,radius:q,activeTooltip:m,tooltipContent:d}):s.jsx(v,{barMiddleX:C,barTopY:h,height:I,width:O,radius:q,hasGradient:a,bgColor:t,activeTooltip:m,tooltipContentText:B,isActive:_===y,barColorChangeOnHover:g})]},n.data.mainX[y].amount)}})})};V.__docgenInfo={description:"",methods:[],displayName:"BarSeries",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""},primarySeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:""},secondarySeries:{required:!1,tsType:{name:"AllBarChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},showBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showSubBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},labelOption:{required:!1,tsType:{name:"LabelOption"},description:""},subLabelOption:{required:!1,tsType:{name:"LabelOption"},description:""},viewBoxHeight:{required:!0,tsType:{name:"number"},description:""},viewBoxWidth:{required:!0,tsType:{name:"number"},description:""},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""},xCoordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},activeDataIndex:{required:!1,tsType:{name:"number"},description:""},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:""}}};const ie=({viewBoxWidth:e,viewBoxHeight:t,hasXAxis:a=!1,hasBarGradient:n=!1,showXGuideLine:r=!1,showYGuideLine:u=!1,primarySeries:o,secondarySeries:i,yGuideLineCount:l=0,activeTooltip:T=!1,tooltipContent:p=(...h)=>h.join(" "),chartTitle:b,chartDescription:L,showBarLabel:d=!0,showSubBarLabel:m=!0,labelOption:_,subLabelOption:g,xAxisType:q,activeDataIndex:A,barColorChangeOnHover:C=!0})=>{const{titleId:h,descId:y}=ae(),{svgWidth:I,adjustedHeight:O,xLabelList:B,xCoordinate:R,primaryCoordinate:X,svgRef:M,xAxisRef:Y}=re({viewBoxWidth:e,viewBoxHeight:t,primarySeries:o,hasXAxis:a});return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e} ${t}`,width:e,height:t,ref:M,role:"graphics-document","aria-labelledby":h,"aria-describedby":y,children:[s.jsxs("g",{children:[s.jsx("title",{id:h,children:b}),s.jsx("desc",{id:y,children:L})]}),u&&s.jsx(U,{svgWidth:I,adjustedHeight:O,yGuideLineCount:l}),r&&s.jsx(w,{xCoordinate:R,adjustedHeight:O}),a&&s.jsxs(s.Fragment,{children:[s.jsx(G,{viewBoxWidth:e,viewBoxHeight:t,axisType:q,ref:Y}),s.jsx(k,{xLabelList:B,xCoordinate:R,viewBoxHeight:t})]}),s.jsx(V,{coordinate:X,hasGradient:n,primarySeries:o,secondarySeries:i,activeTooltip:T,viewBoxHeight:t,viewBoxWidth:e,tooltipContent:p,xCoordinate:R,hasXAxis:a,showBarLabel:d,labelOption:_,showSubBarLabel:m,subLabelOption:g,activeDataIndex:A,barColorChangeOnHover:C})]})};ie.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:"막대 차트의 너비"},viewBoxHeight:{required:!0,tsType:{name:"number"},description:"막대 차트의 높이"},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"X축과 X축 레이블 표시 여부",defaultValue:{value:"false",computed:!1}},hasBarGradient:{required:!1,tsType:{name:"boolean"},description:"막대의 그라데이션 표시 여부",defaultValue:{value:"false",computed:!1}},showXGuideLine:{required:!1,tsType:{name:"boolean"},description:"X축 가이드 라인 표시 여부 (X축과 수직으로 표시되는 점선, 개수는 x축 데이터와 동일)",defaultValue:{value:"false",computed:!1}},showYGuideLine:{required:!1,tsType:{name:"boolean"},description:"Y축 가이드 라인 표시 여부 (Y축과 수평으로 표시되는 점선)",defaultValue:{value:"false",computed:!1}},yGuideLineCount:{required:!1,tsType:{name:"number"},description:"Y축 가이드 라인 개수 (Y축과 수평으로 표시되는 점선의 개수)",defaultValue:{value:"0",computed:!1}},primarySeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:"막대 차트 첫 번쩨 데이터 (실시간 데이터 or 단일 데이터) - 차트의 색상은 primarySeries의 color 속성에 따라 자동으로 설정됨"},secondarySeries:{required:!1,tsType:{name:"AllBarChartSeries"},description:"막대 차트 두 번쩨 데이터 sub라벨용"},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"각 데이터의 툴팁 표시 여부",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:"각 데이터의 툴팁 내용 표시 함수 (실시간 데이터와 평균 데이터의 값을 받아 표시 ex: (mainY, subY) => {mainY} {subY}))",defaultValue:{value:"(...args: string[]) => args.join(' ')",computed:!1}},chartTitle:{required:!1,tsType:{name:"string"},description:"막대 차트 제목 (title 태그 내용: 스크린 리더 접근성 시 사용)"},chartDescription:{required:!1,tsType:{name:"string"},description:"막대 차트 설명 (desc 태그 내용: 스크린 리더 접근성 시 사용)"},xAxisType:{required:!0,tsType:{name:"XAxisType"},description:"X축 타입 (일반, 양쪽 세로선, 오른쪽 화살표)"},showBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 레이블 표시 여부 -> primarySeries의 데이터 값이 레이블로 표시됨",defaultValue:{value:"true",computed:!1}},showSubBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 서브 레이블 표시 여부 -> secondarySeries의 데이터 값이 레이블로 표시됨",defaultValue:{value:"true",computed:!1}},labelOption:{required:!1,tsType:{name:"LabelOption"},description:"각 막대 위에 레이블 옵션"},subLabelOption:{required:!1,tsType:{name:"LabelOption"},description:"각 막대 위에 서브 레이블 옵션"},activeDataIndex:{required:!1,tsType:{name:"number"},description:"현재 포커스된 데이터의 인덱스"},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"바 호버 시 색상 변경할 건지",defaultValue:{value:"true",computed:!1}}}};export{ie as B,ee as a,v as b,f as c,te as g};
