import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as c}from"./iframe-BYnmhMS_.js";import{c as D}from"./periods-BlCP1VCB.js";import{C as F,g as H,a as U,Y as w,X as G,b as k,c as K}from"./YGuideLine-BgfymUM9.js";import{R as B}from"./rankingColors-YVpIGQhO.js";import{f as W}from"./formatNumber-CP0UFUAV.js";import{e as Z,f as P,g as z}from"./toggle-group-DffW7fGY.js";const p={...F,DEFAULT_BAR_COLOR:"var(--color-grey-600)",LABEL_TEXT_COLOR:"var(--color-grey-900)",LABEL_FONT_SIZE:14,LABEL_FONT_WEIGHT:500,SUB_LABEL_TEXT_COLOR:"var(--color-grey-500)",SUB_LABEL_FONT_SIZE:12,LABEL_GAP:20,ACTIVATE_BAR_COLOR:"var(--color-brand-500)",BAR_RADIUS:4,ANIMATION_DURATION_MS:500},Q={RANK_COLOR:[B[0],B[1],B[2],B[4]]},E=({series:e})=>Array.isArray(e.data.mainY[0]),J=({stackBarData:e,barTopY:t,barHeight:a,totalAmount:n,barSegmentCount:r})=>e.reduce((o,d,i)=>{const u=Number(d.amount)||0,T=t+o.percentage/100*a,f=i===r-1?Math.round(Math.max(0,100-o.percentage)*10)/10:n>0?Math.round(u/n*100*10)/10:0,b=f/100*a;return{percentage:o.percentage+f,barSegmentInfoList:[...o.barSegmentInfoList,{y:T,barHeight:b,percentage:f,amount:u,label:d.label,color:d.color??Q.RANK_COLOR[i]}]}},{percentage:0,barSegmentInfoList:[]}).barSegmentInfoList,ee=({stackBarData:e})=>e.reduce((t,a)=>t+(Number(a.amount)||0),0),te=({y:e,hasXAxis:t,viewBoxHeight:a})=>{const{XAXIS_Y_OFFSET:n,XAXIS_STROKE_WIDTH:r}=p,o=t?a-n-e-r/2:a-e;return Math.max(0,o)},ae=({viewBoxWidth:e,xDataLength:t})=>e/t*.5,j=({isStackBar:e,isSubLabel:t,index:a,series:n})=>{if(t&&!e){const r=n.data.mainY[a];return`${r.amount}${r.unit}`}else if(e){const r=n.data.mainY[a],o=r.reduce((i,u)=>typeof u.amount=="number"?i+u.amount:i,0),d=r[0]?.unit||"";return`${o} ${d}`}else{const r=n.data.mainY[a];return`${W(Number(r.amount))}${r.unit}`}},re=()=>{const e=c.useId(),t=c.useId();return{titleId:e,descId:t}},ne=({viewBoxWidth:e,viewBoxHeight:t,primarySeries:a,hasXAxis:n=!1})=>{const[r,o]=c.useState(t),d=c.useRef(null),i=c.useRef(null),u=E({series:a}),T=c.useMemo(()=>a.data.mainX.map(l=>l.amount??""),[a.data.mainX]),f=c.useMemo(()=>a.data.mainX.length===0?[]:H({svgWidth:e,xDataLength:a.data.mainX.length}),[e,a.data.mainX.length]),b=c.useMemo(()=>{const l=u?a.data.mainY.map(g=>g.reduce((C,A)=>C+(Number(A.amount)||0),0)):a.data.mainY.map(g=>g.amount),m=l.length>0?Math.max(...l.filter(g=>g!==null).map(Number)):10;return Math.ceil(Math.ceil(m*1.5)/10)*10},[a.data.mainY,u]),L=c.useMemo(()=>{if(a.data.mainX.length===0)return[];const l=u?{...a,data:{...a.data,mainY:a.data.mainY.map(m=>({amount:m.reduce((_,g)=>_+(Number(g.amount)||0),0),unit:m[0]?.unit||""}))}}:a;return U({svgWidth:e,adjustedHeight:r,xDataLength:l.data.mainX.length,yData:l.data.mainY,maximumY:b})},[e,r,a,b,u]);return c.useLayoutEffect(()=>{(()=>{if(!n||!i.current){o(t);return}const m=i.current.getBBox();o(m.y+m.height/2)})()},[n,t]),{svgWidth:e,adjustedHeight:r,xLabelList:T,xCoordinate:f,primaryCoordinate:L,svgRef:d,xAxisRef:i}},se=({barMiddleX:e,barTopY:t,width:a,height:n,radius:r=0})=>{const o=t+n,d=e-a/2,i=e+a/2;return{pathD:`
      M ${e} ${t}
      H ${d+r}
      Q ${d} ${t} ${d} ${t+r}
      V ${o}
      H ${i}
      V ${t+r}
      Q ${i} ${t} ${i-r} ${t}
      Z
    `}},N=({barRef:e,hasAnimation:t})=>{c.useLayoutEffect(()=>{if(!e||!e.current||!t)return;e.current.style.transform="scaleY(0)";const a=requestAnimationFrame(()=>{e.current&&(e.current.style.transition=`transform ${p.ANIMATION_DURATION_MS}ms ease-out`,e.current.style.transform="scaleY(1)")});return()=>cancelAnimationFrame(a)},[e,t])},ie=({pathRef:e,hasAnimation:t})=>{c.useEffect(()=>{!e.current||!t||(e.current.style.transition=`d ${p.ANIMATION_DURATION_MS}ms ease-in-out`)},[e,t])},S=({barMiddleX:e,barTopY:t,width:a,height:n,radius:r,hasInitAnimation:o=!0,hasMoveAnimation:d=!0,hasGradient:i=!0,activeTooltip:u=!1,tooltipContentText:T,bgColor:f=p.DEFAULT_BAR_COLOR,isActive:b=!1,barColorChangeOnHover:L=!0,className:l})=>{const m=c.useRef(null),_=c.useRef(null),g=Math.min(r??0,a/2,n),{pathD:C}=se({barMiddleX:e,barTopY:t,width:a,height:n,radius:g});N({barRef:_,hasAnimation:o}),ie({pathRef:m,hasAnimation:d});const A=s.jsx("path",{ref:m,d:C,fill:b?p.ACTIVATE_BAR_COLOR:f,className:D(L&&"hover:fill-brand-main"),style:{maskImage:i?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":"",WebkitMaskImage:i?"linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.4))":""}});return s.jsx(s.Fragment,{children:s.jsx("g",{ref:_,style:{transformOrigin:`${e}px ${t+n}px`},className:l,children:u?s.jsxs(Z,{children:[s.jsx(P,{asChild:!0,children:A}),s.jsx(z,{side:"left",align:"start",className:"bg-grey-800 transition-duration-200 px-250! text-gray-50 [&_svg]:invisible",children:T})]}):A})})};S.__docgenInfo={description:"",methods:[],displayName:"Bar",props:{barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:""},hasInitAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasMoveAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContentText:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},isActive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},bgColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};const v=({x:e,y:t,label:a,labelOptions:n,offsetY:r=8})=>{const{fontWeight:o=p.LABEL_FONT_WEIGHT,fontSize:d=p.LABEL_FONT_SIZE,textColor:i=p.LABEL_TEXT_COLOR,textAnchor:u="middle"}=n||{};return s.jsx("text",{x:0,y:0,fill:i,textAnchor:u,fontSize:d,fontWeight:o,style:{transform:`translate(${e}px, ${t-r}px)`,transition:`transform ${p.ANIMATION_DURATION_MS}ms ease-in-out`},children:a})};v.__docgenInfo={description:"",methods:[],displayName:"BarLabel",props:{x:{required:!0,tsType:{name:"number"},description:""},y:{required:!0,tsType:{name:"number"},description:""},label:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},offsetY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},labelOptions:{required:!1,tsType:{name:"LabelOption"},description:""}}};const $=({stackBarData:e,barMiddleX:t,barTopY:a,width:n,height:r,radius:o,hasAnimation:d=!0,activeTooltip:i=!0,tooltipContent:u})=>{const T=c.useRef(null);N({barRef:T,hasAnimation:d});const f=ee({stackBarData:e}),b=e.length,L=J({stackBarData:e,barTopY:a,barHeight:r,totalAmount:f,barSegmentCount:b});return s.jsx(s.Fragment,{children:s.jsx("g",{ref:T,style:{transformOrigin:`${t}px ${a+r}px`},children:L.map((l,m)=>s.jsx(S,{barMiddleX:t,barTopY:l.y,width:n,height:l.barHeight,bgColor:l.color??"#eee",radius:m===0?o:0,hasInitAnimation:!1,hasMoveAnimation:!0,hasGradient:!1,activeTooltip:i,barColorChangeOnHover:!1,tooltipContentText:u?.(l.label,l.amount.toString(),`${l.percentage.toString()}%`)??""},m))})})};$.__docgenInfo={description:"",methods:[],displayName:"StackBar",props:{stackBarData:{required:!0,tsType:{name:"Array",elements:[{name:"StackBarSegment"}],raw:"StackBarSegment[]"},description:""},barMiddleX:{required:!0,tsType:{name:"number"},description:""},barTopY:{required:!0,tsType:{name:"number"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},radius:{required:!1,tsType:{name:"number"},description:""},hasAnimation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""}}};const V=({coordinate:e,color:t=p.DEFAULT_BAR_COLOR,hasGradient:a=!1,primarySeries:n,secondarySeries:r,showBarLabel:o=!0,showSubBarLabel:d=!0,labelOption:i,subLabelOption:u,hasXAxis:T=!1,viewBoxHeight:f,viewBoxWidth:b,xCoordinate:L,tooltipContent:l,activeTooltip:m,activeDataIndex:_,barColorChangeOnHover:g})=>{const{BAR_RADIUS:C}=p,A=E({series:n});return s.jsx(s.Fragment,{children:e.map(({x:q,y:h},y)=>{if(q!==null&&h!==null){const x=te({y:h,hasXAxis:T,viewBoxHeight:f}),O=ae({viewBoxWidth:b,xDataLength:L.length}),I=l?l(n.data.mainY[y].amount?.toString()??"",n.data.mainY[y].unit?.toString()??""):null;return s.jsxs("g",{children:[r&&d&&s.jsx(v,{x:q,y:h-p.LABEL_GAP,label:j({isStackBar:A,isSubLabel:!0,index:y,series:r}),labelOptions:{...u,textColor:u?.textColor??p.SUB_LABEL_TEXT_COLOR,fontSize:u?.fontSize??p.SUB_LABEL_FONT_SIZE}}),o&&s.jsx(v,{x:q,y:h,label:j({isStackBar:A,index:y,series:n}),labelOptions:i}),A?s.jsx($,{stackBarData:n.data.mainY[y],barMiddleX:q,barTopY:h,height:x,width:O,radius:C,activeTooltip:m,tooltipContent:l}):s.jsx(S,{barMiddleX:q,barTopY:h,height:x,width:O,radius:C,hasGradient:a,bgColor:t,activeTooltip:m,tooltipContentText:I,isActive:_===y,barColorChangeOnHover:g})]},n.data.mainX[y].amount)}})})};V.__docgenInfo={description:"",methods:[],displayName:"BarSeries",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"BAR_CHART.DEFAULT_BAR_COLOR",computed:!0}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""},primarySeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:""},secondarySeries:{required:!1,tsType:{name:"AllBarChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},showBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showSubBarLabel:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},labelOption:{required:!1,tsType:{name:"LabelOption"},description:""},subLabelOption:{required:!1,tsType:{name:"LabelOption"},description:""},viewBoxHeight:{required:!0,tsType:{name:"number"},description:""},viewBoxWidth:{required:!0,tsType:{name:"number"},description:""},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""},xCoordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},activeDataIndex:{required:!1,tsType:{name:"number"},description:""},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:""}}};const oe=({viewBoxWidth:e,viewBoxHeight:t,hasXAxis:a=!1,hasBarGradient:n=!1,showXGuideLine:r=!1,showYGuideLine:o=!1,primarySeries:d,secondarySeries:i,yGuideLineCount:u=0,activeTooltip:T=!1,tooltipContent:f=(...h)=>h.join(" "),chartTitle:b,chartDescription:L,showBarLabel:l=!0,showSubBarLabel:m=!0,labelOption:_,subLabelOption:g,xAxisType:C,activeDataIndex:A,barColorChangeOnHover:q=!0})=>{const{titleId:h,descId:y}=re(),{svgWidth:x,adjustedHeight:O,xLabelList:I,xCoordinate:R,primaryCoordinate:X,svgRef:Y,xAxisRef:M}=ne({viewBoxWidth:e,viewBoxHeight:t,primarySeries:d,hasXAxis:a});return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e} ${t}`,width:e,height:t,ref:Y,role:"graphics-document","aria-labelledby":h,"aria-describedby":y,children:[s.jsxs("g",{children:[s.jsx("title",{id:h,children:b}),s.jsx("desc",{id:y,children:L})]}),o&&s.jsx(w,{svgWidth:x,adjustedHeight:O,yGuideLineCount:u}),r&&s.jsx(G,{xCoordinate:R,adjustedHeight:O}),a&&s.jsxs(s.Fragment,{children:[s.jsx(k,{viewBoxWidth:e,viewBoxHeight:t,axisType:C,ref:M}),s.jsx(K,{xLabelList:I,xCoordinate:R,viewBoxHeight:t})]}),s.jsx(V,{coordinate:X,hasGradient:n,primarySeries:d,secondarySeries:i,activeTooltip:T,viewBoxHeight:t,viewBoxWidth:e,tooltipContent:f,xCoordinate:R,hasXAxis:a,showBarLabel:l,labelOption:_,showSubBarLabel:m,subLabelOption:g,activeDataIndex:A,barColorChangeOnHover:q})]})};oe.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:"막대 차트의 너비"},viewBoxHeight:{required:!0,tsType:{name:"number"},description:"막대 차트의 높이"},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"X축과 X축 레이블 표시 여부",defaultValue:{value:"false",computed:!1}},hasBarGradient:{required:!1,tsType:{name:"boolean"},description:"막대의 그라데이션 표시 여부",defaultValue:{value:"false",computed:!1}},showXGuideLine:{required:!1,tsType:{name:"boolean"},description:"X축 가이드 라인 표시 여부 (X축과 수직으로 표시되는 점선, 개수는 x축 데이터와 동일)",defaultValue:{value:"false",computed:!1}},showYGuideLine:{required:!1,tsType:{name:"boolean"},description:"Y축 가이드 라인 표시 여부 (Y축과 수평으로 표시되는 점선)",defaultValue:{value:"false",computed:!1}},yGuideLineCount:{required:!1,tsType:{name:"number"},description:"Y축 가이드 라인 개수 (Y축과 수평으로 표시되는 점선의 개수)",defaultValue:{value:"0",computed:!1}},primarySeries:{required:!0,tsType:{name:"AllBarChartSeries"},description:"막대 차트 첫 번쩨 데이터 (실시간 데이터 or 단일 데이터) - 차트의 색상은 primarySeries의 color 속성에 따라 자동으로 설정됨"},secondarySeries:{required:!1,tsType:{name:"AllBarChartSeries"},description:"막대 차트 두 번쩨 데이터 sub라벨용"},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"각 데이터의 툴팁 표시 여부",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:"각 데이터의 툴팁 내용 표시 함수 (실시간 데이터와 평균 데이터의 값을 받아 표시 ex: (mainY, subY) => {mainY} {subY}))",defaultValue:{value:"(...args: string[]) => args.join(' ')",computed:!1}},chartTitle:{required:!1,tsType:{name:"string"},description:"막대 차트 제목 (title 태그 내용: 스크린 리더 접근성 시 사용)"},chartDescription:{required:!1,tsType:{name:"string"},description:"막대 차트 설명 (desc 태그 내용: 스크린 리더 접근성 시 사용)"},xAxisType:{required:!0,tsType:{name:"XAxisType"},description:"X축 타입 (일반, 양쪽 세로선, 오른쪽 화살표)"},showBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 레이블 표시 여부 -> primarySeries의 데이터 값이 레이블로 표시됨",defaultValue:{value:"true",computed:!1}},showSubBarLabel:{required:!1,tsType:{name:"boolean"},description:"각 막대 위에 서브 레이블 표시 여부 -> secondarySeries의 데이터 값이 레이블로 표시됨",defaultValue:{value:"true",computed:!1}},labelOption:{required:!1,tsType:{name:"LabelOption"},description:"각 막대 위에 레이블 옵션"},subLabelOption:{required:!1,tsType:{name:"LabelOption"},description:"각 막대 위에 서브 레이블 옵션"},activeDataIndex:{required:!1,tsType:{name:"number"},description:"현재 포커스된 데이터의 인덱스"},barColorChangeOnHover:{required:!1,tsType:{name:"boolean"},description:"바 호버 시 색상 변경할 건지",defaultValue:{value:"true",computed:!1}}}};export{oe as B,te as a,S as b,p as c,ae as g};
