import{j as d}from"./jsx-runtime-u17CrQMm.js";import{r as o}from"./iframe-CbgnqsfJ.js";import"./periods-BlCP1VCB.js";import{R as h}from"./RefreshControl-D7q85DBc.js";import{S as m}from"./SectionTitle-BfAZ3e-e.js";var p={setTimeout:(e,r)=>setTimeout(e,r),clearTimeout:e=>clearTimeout(e),setInterval:(e,r)=>setInterval(e,r),clearInterval:e=>clearInterval(e)},y=class{#e=p;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,r){return this.#e.setTimeout(e,r)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,r){return this.#e.setInterval(e,r)}clearInterval(e){this.#e.clearInterval(e)}},D=new y;function v(e){setTimeout(e,0)}var C=v;function T(){let e=[],r=0,s=t=>{t()},i=t=>{t()},n=C;const u=t=>{r?e.push(t):n(()=>{s(t)})},c=()=>{const t=e;e=[],t.length&&n(()=>{i(()=>{t.forEach(a=>{s(a)})})})};return{batch:t=>{let a;r++;try{a=t()}finally{r--,r||c()}return a},batchCalls:t=>(...a)=>{u(()=>{t(...a)})},schedule:u,setNotifyFunction:t=>{s=t},setBatchNotifyFunction:t=>{i=t},setScheduler:t=>{n=t}}}var g=T(),q=o.createContext(void 0),f=e=>{const r=o.useContext(q);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r};function w(e,r){const s=f(),i=s.getQueryCache();return o.useSyncExternalStore(o.useCallback(n=>i.subscribe(g.batchCalls(n)),[i]),()=>s.isFetching(e),()=>s.isFetching(e))}const x=({prefixKey:e,initLastUpdatedNow:r=!0})=>{const s=f(),[i,n]=o.useState(r?new Date:null),u=o.useCallback(()=>n(new Date),[]),t=w({queryKey:e})>0,a=o.useCallback(async()=>{const l=new Date;await s.refetchQueries({queryKey:e,type:"active"},{throwOnError:!0}),n(l)},[s,e]);return{lastUpdatedDate:i,isFetching:t,refresh:a,updateLastUpdatedDateToNow:u}},N=({title:e,description:r,prefixKey:s,initLastUpdatedNow:i,triggerUpdateRefreshDate:n,rightSlot:u})=>{const{lastUpdatedDate:c,isFetching:t,refresh:a,updateLastUpdatedDateToNow:l}=x({prefixKey:s,initLastUpdatedNow:i});return o.useEffect(()=>{n&&l()},[n,l]),d.jsxs("header",{className:"flex justify-between gap-600",children:[d.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[d.jsx(m,{title:e,description:r}),d.jsx(h,{lastUpdatedDate:c,onRefresh:a,isLoading:t})]}),u]})};N.__docgenInfo={description:"",methods:[],displayName:"SectionHeader",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},prefixKey:{required:!0,tsType:{name:"QueryKey"},description:""},initLastUpdatedNow:{required:!1,tsType:{name:"boolean"},description:""},triggerUpdateRefreshDate:{required:!1,tsType:{name:"number"},description:""},rightSlot:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{N as S,g as n,D as t,f as u};
