import{j as r}from"./jsx-runtime-u17CrQMm.js";import{r as l}from"./iframe-A4TlSksM.js";import"./periods-BueKGNxC.js";import{T as v,a as w,b as M}from"./index-9jgyuMaz.js";const P=({svgWidth:t,xDataLength:n})=>{const e=t/n,s=e*(n-1),i=(t-s)/2;return Array.from({length:n}).map((a,o)=>({x:o*e+i,y:0}))},I=t=>t.filter(n=>n.y!==null),E=({svgWidth:t,adjustedHeight:n,series:e,maximumY:s})=>{const i=e.data.mainX.length,a=t/i,o=a*(i-1),u=(t-o)/2;return Array.from({length:i}).map((m,d)=>({x:d*a+u,y:e.data.mainY[d]?.amount===null||e.data.mainY[d]?.amount===void 0?null:n-Number(e.data.mainY[d].amount)/s*n}))},x={TICK_HEIGHT:11,GUIDE_LINE_STROKE_WIDTH:1.5,DOT_RADIUS:2.5,LINE_STROKE_WIDTH:1,XAXIS_STROKE_WIDTH:1.5,XAXIS_RIGHT_OFFSET:1,XAXIS_RIGHT_ARROW_X_OFFSET:4,XAXIS_RIGHT_ARROW_Y_OFFSET:4,XAXIS_Y_OFFSET:28,GRADIENT_COLOR:"#009AFA",X_AXIS_LABEL_OFFSET:5,GUIDE_LINE_DASH_ARRAY:"4 4"},V=({coordinate:t})=>{const n=I(t),e=n.reduce((s,{x:i,y:a},o)=>o===0?`M ${i} ${a}`:`${s} L ${i} ${a}`,"");return{filteredCoordinate:n,pathD:e}},W=({coordinateCount:t,pathD:n})=>{const e=l.useRef(null),s=l.useRef(0),i=l.useRef(0);return l.useLayoutEffect(()=>{if(!e.current||!n)return;let a=null;if(i.current!==t){i.current=t;const o=e.current.getTotalLength();e.current.style.strokeDasharray=`${o}`,e.current.style.strokeDashoffset=`${o-s.current}`,e.current.style.transition="none",s.current=o,a=requestAnimationFrame(()=>{e.current&&(e.current.style.transition="stroke-dashoffset 1s ease-in-out",e.current.style.strokeDashoffset="0")})}else e.current.style.removeProperty("stroke-dasharray"),e.current.style.removeProperty("stroke-dashoffset"),e.current.style.transition="d 0.5s ease-in-out";return()=>{a&&cancelAnimationFrame(a)}},[e,n,t]),{lineRef:e}},K=()=>{const t=l.useId(),n=l.useId(),e=l.useId(),s=l.useId();return{lineGradientId:t,backgroundGradientId:n,titleId:e,descId:s}},U=({viewBoxWidth:t,viewBoxHeight:n,primarySeries:e,secondarySeries:s,hasXAxis:i=!1})=>{const[a,o]=l.useState(n),u=l.useRef(null),m=l.useRef(null),d=l.useMemo(()=>e.data.mainX.map(c=>c.amount??""),[e.data.mainX]),p=l.useMemo(()=>e.data.mainX.length===0?[]:P({svgWidth:t,xDataLength:e.data.mainX.length}),[t,e.data.mainX.length]),g=l.useMemo(()=>{const c=[...e.data.mainY.map(T=>T.amount),...s?.data.mainY.map(T=>T.amount)??[]].flat(),h=c.length>0?Math.max(...c.filter(T=>T!==null).map(Number)):10;return Math.ceil(Math.ceil(h*1.5)/10)*10},[e.data.mainY,s?.data.mainY]),f=l.useMemo(()=>e.data.mainX.length===0?[]:E({svgWidth:t,adjustedHeight:a,series:e,maximumY:g}),[t,a,e,g]),_=l.useMemo(()=>{const c=I(f);return c.length===0?0:c[c.length-1].x},[f]),y=l.useMemo(()=>s===void 0||s.data.mainX.length===0?[]:E({svgWidth:t,adjustedHeight:a,series:s,maximumY:g}),[t,a,s,g]);return l.useLayoutEffect(()=>{(()=>{if(!i||!m.current){o(n);return}const h=m.current.getBBox();o(h.y+h.height/2)})()},[i,n]),{svgWidth:t,adjustedHeight:a,xLabelList:d,xCoordinate:p,lastXCoordinate:_,primaryCoordinate:f,secondaryCoordinate:y,svgRef:u,xAxisRef:m,filterCoordinate:I}},b=l.memo(({adjustedHeight:t,lastXCoordinate:n,gradientId:e})=>r.jsx("rect",{x:0,y:0,width:n,height:t,fill:`url(#${e})`,className:"transition-all duration-1000"}));b.displayName="GradientBackground";b.__docgenInfo={description:"",methods:[],displayName:"GradientBackground",props:{adjustedHeight:{required:!0,tsType:{name:"number"},description:""},lastXCoordinate:{required:!0,tsType:{name:"number"},description:""},gradientId:{required:!0,tsType:{name:"string"},description:""}}};const $=({lineGradientId:t,backgroundGradientId:n})=>{const{GRADIENT_COLOR:e}=x;return r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:t,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.3"}),r.jsx("stop",{offset:"75%",stopColor:e,stopOpacity:"0.3"}),r.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"0.7"})]}),r.jsxs("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0"}),r.jsx("stop",{offset:"73.97%",stopColor:e,stopOpacity:"0.03"}),r.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"0.06"})]})]})};$.__docgenInfo={description:"",methods:[],displayName:"LineChartGradient",props:{lineGradientId:{required:!0,tsType:{name:"string"},description:""},backgroundGradientId:{required:!0,tsType:{name:"string"},description:""}}};const D=({series:t,activeTooltip:n,tooltipContent:e,coordinate:s,color:i})=>{const{DOT_RADIUS:a}=x,o=I(s);return n?r.jsx(r.Fragment,{children:o.map(({x:u,y:m},d)=>{const p=`${t.data.mainY[d].amount??""}${t.data.mainY[d].unit??""}`,g=`${t.data.subY[d]?.amount??""}${t.data.subY[d]?.unit??""}`,f=e(p,g);return r.jsxs(v,{children:[r.jsx(w,{asChild:!0,children:r.jsx("circle",{cx:u,cy:m,r:a,fill:i,role:"graphics-symbol",stroke:"none",className:"hover:brightness-75 hover:saturate-200",tabIndex:0,"aria-label":f,style:{transition:"cx 0.5s ease-in-out, cy 0.5s ease-in-out"}})}),r.jsx(M,{side:"top",className:"rounded-150 bg-grey-900 [&_svg]:fill-grey-900 [&_svg]:-translate-y-1 [&_svg]:rotate-0",children:r.jsx("p",{className:"text-grey-100 caption-medium-semibold",children:f})})]},d)})}):r.jsx(r.Fragment,{children:o.map(({x:u,y:m},d)=>r.jsx("circle",{cx:u,cy:m,r:a,fill:i,stroke:"none",role:"graphics-symbol",tabIndex:0,"aria-label":`${t.data.mainX[d].amount} ${t.data.mainX[d].unit}`,style:{transition:"cx 0.5s ease-in-out, cy 0.5s ease-in-out"}},d))})};D.__docgenInfo={description:"",methods:[],displayName:"Dots",props:{series:{required:!0,tsType:{name:"LineChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},tooltipContent:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""},coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!0,tsType:{name:"string"},description:""}}};const N=({coordinate:t,color:n,hasGradient:e=!1,gradientId:s})=>{const{LINE_STROKE_WIDTH:i}=x,{filteredCoordinate:a,pathD:o}=V({coordinate:t}),{lineRef:u}=W({coordinateCount:a.length,pathD:o});return r.jsx("path",{d:o,stroke:e?`url(#${s})`:n,strokeWidth:i,fill:"none",ref:u})};N.__docgenInfo={description:"",methods:[],displayName:"Line",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!0,tsType:{name:"string"},description:""},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""}}};const X=({coordinate:t,color:n,hasGradient:e=!1,gradientId:s,series:i,activeTooltip:a,tooltipContent:o})=>r.jsxs(r.Fragment,{children:[r.jsx(N,{coordinate:t,color:n,hasGradient:e,gradientId:s}),r.jsx(D,{series:i,activeTooltip:a,tooltipContent:o,coordinate:t,color:n})]});X.__docgenInfo={description:"",methods:[],displayName:"Series",props:{coordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},color:{required:!0,tsType:{name:"string"},description:""},hasGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},gradientId:{required:!1,tsType:{name:"string"},description:""},series:{required:!0,tsType:{name:"LineChartSeries"},description:""},activeTooltip:{required:!0,tsType:{name:"boolean"},description:""},tooltipContent:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:""}}};const j=l.memo(({viewBoxWidth:t,viewBoxHeight:n,axisType:e,ref:s})=>{const{XAXIS_STROKE_WIDTH:i,XAXIS_Y_OFFSET:a,TICK_HEIGHT:o,XAXIS_RIGHT_OFFSET:u,XAXIS_RIGHT_ARROW_X_OFFSET:m,XAXIS_RIGHT_ARROW_Y_OFFSET:d}=x,p=n-a,g=`M ${i/2} ${p-o/2} v ${o}`,f=`M 0 ${p} h ${t-u}`,_=`m -${i/2} -${o/2} v ${o}`,y=`m -${m} -${d} L ${t-u} ${p} L ${t-u-m} ${p+d}`;let c="";switch(e){case"default":c=f;break;case"tick":c=`${g} ${f} ${_}`;break;case"right-arrow":c=`${f} ${y}`;break;default:c=f}return r.jsx("path",{d:c,strokeWidth:i,stroke:"currentColor",strokeLinecap:"round",className:"text-grey-400","aria-hidden":"true",fill:"none",ref:s})});j.displayName="XAxis";j.__docgenInfo={description:"",methods:[],displayName:"XAxis",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:""},viewBoxHeight:{required:!0,tsType:{name:"number"},description:""},axisType:{required:!0,tsType:{name:"XAxisType"},description:""},ref:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"SVGPathElement | null",elements:[{name:"SVGPathElement"},{name:"null"}]}],raw:"RefObject<SVGPathElement | null>"},description:""}}};const C=l.memo(({viewBoxHeight:t,xLabelList:n,xCoordinate:e})=>{const{X_AXIS_LABEL_OFFSET:s}=x;return r.jsx("g",{className:"flex justify-between",children:e.map(({x:i},a)=>r.jsx("text",{x:i??0,y:t-s,textAnchor:"middle",className:"text-grey-900 body-small-medium",children:n[a]},a))})});C.displayName="XAxisLabel";C.__docgenInfo={description:"",methods:[],displayName:"XAxisLabel",props:{viewBoxHeight:{required:!0,tsType:{name:"number"},description:""},xLabelList:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(string | number)[]"},description:""},xCoordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""}}};const R=l.memo(({xCoordinate:t,adjustedHeight:n})=>{const{TICK_HEIGHT:e,GUIDE_LINE_STROKE_WIDTH:s,GUIDE_LINE_DASH_ARRAY:i}=x,a=t.map(({x:u})=>`M ${u} 0 v ${n-e/2}`).join(" "),o=t.map(({x:u})=>`M ${u} ${n-e/2} v ${e}`).join(" ");return r.jsxs(r.Fragment,{children:[r.jsx("path",{d:a,strokeWidth:s,stroke:"currentColor",strokeDasharray:i,className:"text-grey-300","aria-hidden":"true"}),r.jsx("path",{d:o,strokeWidth:s,stroke:"currentColor",strokeLinecap:"round",className:"text-grey-400","aria-hidden":"true"})]})});R.displayName="XGuideLine";R.__docgenInfo={description:"",methods:[],displayName:"XGuideLine",props:{xCoordinate:{required:!0,tsType:{name:"Array",elements:[{name:"Coordinate"}],raw:"Coordinate[]"},description:""},adjustedHeight:{required:!0,tsType:{name:"number"},description:""}}};const q=l.memo(({svgWidth:t,adjustedHeight:n,yGuideLineCount:e})=>{const{GUIDE_LINE_STROKE_WIDTH:s,GUIDE_LINE_DASH_ARRAY:i}=x,a=n/e,u=Array.from({length:e}).reduce((m,d,p)=>[...m,[0,p*a+s/2]],[]).map(([m,d])=>`M ${m} ${d} h ${t}`).join(" ");return r.jsx("path",{d:u,strokeWidth:s,stroke:"currentColor",strokeDasharray:i,className:"text-grey-300","aria-hidden":"true"})});q.displayName="YGuideLine";q.__docgenInfo={description:"",methods:[],displayName:"YGuideLine",props:{svgWidth:{required:!0,tsType:{name:"number"},description:""},adjustedHeight:{required:!0,tsType:{name:"number"},description:""},yGuideLineCount:{required:!0,tsType:{name:"number"},description:""}}};const z=({viewBoxWidth:t,viewBoxHeight:n,hasXAxis:e=!1,hasGradient:s=!1,showXGuideLine:i=!1,showYGuideLine:a=!1,primarySeries:o,secondarySeries:u,yGuideLineCount:m,activeTooltip:d=!1,tooltipContent:p=(...y)=>y.join(" "),chartTitle:g,chartDescription:f,xAxisType:_})=>{const{lineGradientId:y,backgroundGradientId:c,titleId:h,descId:A}=K(),{svgWidth:T,adjustedHeight:L,xLabelList:Y,xCoordinate:G,lastXCoordinate:k,primaryCoordinate:O,secondaryCoordinate:S,svgRef:F,xAxisRef:H}=U({viewBoxWidth:t,viewBoxHeight:n,primarySeries:o,secondarySeries:u,hasXAxis:e});return r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:n,viewBox:`0 0 ${t} ${n}`,ref:F,role:"graphics-document","aria-labelledby":h,"aria-describedby":A,children:[r.jsxs("g",{children:[r.jsx("title",{id:h,children:g}),r.jsx("desc",{id:A,children:f})]}),r.jsx($,{lineGradientId:y,backgroundGradientId:c}),s&&r.jsx(b,{adjustedHeight:L,lastXCoordinate:k,gradientId:c}),a&&r.jsx(q,{svgWidth:T,adjustedHeight:L,yGuideLineCount:m}),i&&r.jsx(R,{xCoordinate:G,adjustedHeight:L}),e&&r.jsxs(r.Fragment,{children:[r.jsx(j,{viewBoxWidth:t,viewBoxHeight:n,axisType:_,ref:H}),r.jsx(C,{xLabelList:Y,xCoordinate:G,viewBoxHeight:n})]}),r.jsx(X,{coordinate:O,color:o.color,hasGradient:s,gradientId:y,series:o,activeTooltip:d,tooltipContent:p}),u&&r.jsx(X,{coordinate:S,color:u.color,series:u,activeTooltip:d,tooltipContent:p})]})};z.__docgenInfo={description:"",methods:[],displayName:"LineChart",props:{viewBoxWidth:{required:!0,tsType:{name:"number"},description:"꺾은선 차트의 너비"},viewBoxHeight:{required:!0,tsType:{name:"number"},description:"꺾은선 차트의 높이"},hasXAxis:{required:!1,tsType:{name:"boolean"},description:"X축과 X축 레이블 표시 여부",defaultValue:{value:"false",computed:!1}},hasGradient:{required:!1,tsType:{name:"boolean"},description:"꺾은선 차트의 그라데이션 표시 여부 (실시간 + 과거 데이터 표시 시 사용)",defaultValue:{value:"false",computed:!1}},showXGuideLine:{required:!1,tsType:{name:"boolean"},description:"X축 가이드 라인 표시 여부 (X축과 수직으로 표시되는 점선, 개수는 x축 데이터와 동일)",defaultValue:{value:"false",computed:!1}},showYGuideLine:{required:!1,tsType:{name:"boolean"},description:"Y축 가이드 라인 표시 여부 (Y축과 수평으로 표시되는 점선)",defaultValue:{value:"false",computed:!1}},yGuideLineCount:{required:!0,tsType:{name:"number"},description:"Y축 가이드 라인 개수 (Y축과 수평으로 표시되는 점선의 개수)"},primarySeries:{required:!0,tsType:{name:"LineChartSeries"},description:"꺾은선 차트 첫 번쩨 데이터 (실시간 데이터 or 단일 데이터) - 차트의 색상은 primarySeries의 color 속성에 따라 자동으로 설정됨"},secondarySeries:{required:!1,tsType:{name:"LineChartSeries"},description:"꺾은선 차트 두 번쩨 데이터 (평균 데이터) - 차트의 색상은 secondarySeries의 color 속성에 따라 자동으로 설정됨"},activeTooltip:{required:!1,tsType:{name:"boolean"},description:"각 데이터의 툴팁 표시 여부",defaultValue:{value:"false",computed:!1}},tooltipContent:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: string[]) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"args",rest:!0}],return:{name:"string"}}},description:"각 데이터의 툴팁 내용 표시 함수 (실시간 데이터와 평균 데이터의 값을 받아 표시 ex: (mainY, subY) => {mainY} {subY}))",defaultValue:{value:"(...args: string[]) => args.join(' ')",computed:!1}},chartTitle:{required:!1,tsType:{name:"string"},description:"꺾은선 차트 제목 (title 태그 내용: 스크린 리더 접근성 시 사용)"},chartDescription:{required:!1,tsType:{name:"string"},description:"꺾은선 차트 설명 (desc 태그 내용: 스크린 리더 접근성 시 사용)"},xAxisType:{required:!0,tsType:{name:"XAxisType"},description:"X축 타입 (일반, 양쪽 세로선, 오른쪽 화살표)"}}};export{z as L,R as X,q as Y,E as a,j as b,C as c,P as g};
