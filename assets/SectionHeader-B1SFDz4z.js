import{j as d}from"./jsx-runtime-u17CrQMm.js";import{r as o}from"./iframe-CEq6TIeu.js";import"./periods-BueKGNxC.js";import{R as p}from"./RefreshControl-UKGiIfSO.js";import{S as h}from"./SectionTitle-oS84QTeS.js";function y(t){setTimeout(t,0)}var m=y;function C(){let t=[],r=0,s=e=>{e()},a=e=>{e()},n=m;const c=e=>{r?t.push(e):n(()=>{s(e)})},u=()=>{const e=t;t=[],e.length&&n(()=>{a(()=>{e.forEach(i=>{s(i)})})})};return{batch:e=>{let i;r++;try{i=e()}finally{r--,r||u()}return i},batchCalls:e=>(...i)=>{c(()=>{e(...i)})},schedule:c,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{n=e}}}var g=C(),q=o.createContext(void 0),f=t=>{const r=o.useContext(q);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r};function w(t,r){const s=f(),a=s.getQueryCache();return o.useSyncExternalStore(o.useCallback(n=>a.subscribe(g.batchCalls(n)),[a]),()=>s.isFetching(t),()=>s.isFetching(t))}const x=({prefixKey:t,initLastUpdatedNow:r=!0})=>{const s=f(),[a,n]=o.useState(r?new Date:null),c=o.useCallback(()=>n(new Date),[]),e=w({queryKey:t})>0,i=o.useCallback(async()=>{const l=new Date;await s.refetchQueries({queryKey:t,type:"active"},{throwOnError:!0}),n(l)},[s,t]);return{lastUpdatedDate:a,isFetching:e,refresh:i,updateLastUpdatedDateToNow:c}},N=({title:t,description:r,prefixKey:s,initLastUpdatedNow:a,triggerUpdateRefreshDate:n,rightSlot:c})=>{const{lastUpdatedDate:u,isFetching:e,refresh:i,updateLastUpdatedDateToNow:l}=x({prefixKey:s,initLastUpdatedNow:a});return o.useEffect(()=>{n&&l()},[n,l]),d.jsxs("header",{className:"flex justify-between gap-600",children:[d.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[d.jsx(h,{title:t,description:r}),d.jsx(p,{lastUpdatedDate:u,onRefresh:i,isLoading:e})]}),c]})};N.__docgenInfo={description:"",methods:[],displayName:"SectionHeader",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},prefixKey:{required:!0,tsType:{name:"QueryKey"},description:""},initLastUpdatedNow:{required:!1,tsType:{name:"boolean"},description:""},triggerUpdateRefreshDate:{required:!1,tsType:{name:"number"},description:""},rightSlot:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{N as S};
